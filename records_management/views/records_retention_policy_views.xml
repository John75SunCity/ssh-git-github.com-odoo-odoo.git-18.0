<?xml version="1.0" encoding=                    <button name="action_view_rules"
                            type="object"
                            string="View Rules"
                            icon="fa-list"
                            class="btn-link"/>
                </list>"?>
<odoo>
    <data>
        <!-- Tree View for Records Retention Policy -->
        <record id="records_retention_policy_view_tree" model="ir.ui.view">
            <field name="name">records.retention.policy.view.tree</field>
            <field name="model">records.retention.policy</field>
            <field name="type">list</field>
            <field name="arch" type="xml">
                <list decoration-success="state == 'active'"
                      decoration-muted="state == 'archived'"
                      decoration-warning="is_expired == True"
                      decoration-info="state == 'draft'">
                    <field name="sequence" widget="handle"/>
                    <field name="name" string="Policy Name"/>
                    <field name="code" string="Code"/>
                    <field name="retention_years" string="Retention (Years)"/>
                    <field name="retention_unit" string="Unit"/>
                    <field name="destruction_method" string="Destruction"/>
                    <field name="state" string="Status" widget="badge"/>
                    <field name="compliance_status" string="Compliance" widget="badge"/>
                    <field name="document_count" string="Documents" widget="integer"/>
                    <field name="rule_count" string="Rules" widget="integer"/>
                    <button name="action_activate"
                            type="object"
                            string="Activate"
                            icon="fa-play"
                            class="btn-link"
                            attrs="{'invisible': [('state', '!=', 'draft')]}"/>
                    <button name="action_view_rules"
                            type="object"
                            string="View Rules"
                            icon="fa-list"
                            class="btn-link"/>
                </tree>
            </field>
        </record>

        <!-- Form View for Records Retention Policy -->
        <record id="records_retention_policy_view_form" model="ir.ui.view">
            <field name="name">records.retention.policy.view.form</field>
            <field name="model">records.retention.policy</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
                <form string="Records Retention Policy">
                    <header>
                        <button name="action_activate"
                                type="object"
                                string="Activate Policy"
                                class="oe_highlight"
                                attrs="{'invisible': [('state', '!=', 'draft')]}"/>
                        <button name="action_archive"
                                type="object"
                                string="Archive Policy"
                                attrs="{'invisible': [('state', '!=', 'active')]}"/>
                        <button name="action_review"
                                type="object"
                                string="Review Policy"
                                class="oe_highlight"
                                attrs="{'invisible': [('state', '!=', 'active')]}"/>
                        <field name="state" widget="statusbar" statusbar_visible="draft,active,under_review,archived"/>
                    </header>
                    <sheet>
                        <div class="oe_button_box" name="button_box">
                            <button class="oe_stat_button"
                                    type="object"
                                    name="action_view_documents"
                                    icon="fas fa-file-alt">
                                <div class="o_field_widget o_stat_info">
                                    <span class="o_stat_value">
                                        <field name="document_count"/>
                                    </span>
                                    <span class="o_stat_text">Documents</span>
                                </div>
                            </button>
                            <button class="oe_stat_button"
                                    type="object"
                                    name="action_view_rules"
                                    icon="fas fa-gavel">
                                <div class="o_field_widget o_stat_info">
                                    <span class="o_stat_value">
                                        <field name="rule_count"/>
                                    </span>
                                    <span class="o_stat_text">Rules</span>
                                </div>
                            </button>
                            <button class="oe_stat_button"
                                    type="object"
                                    name="action_view_compliance"
                                    icon="fas fa-shield-alt">
                                <div class="o_field_widget o_stat_info">
                                    <span class="o_stat_text">Compliance</span>
                                </div>
                            </button>
                        </div>
                        <div class="oe_title">
                            <div class="o_row">
                                <h1>
                                    <field name="name" required="1" placeholder="Retention Policy Name"/>
                                </h1>
                                <div class="o_row" style="margin-left: 20px;">
                                    <h3>
                                        Code: <field name="code" required="1" class="oe_inline"/>
                                    </h3>
                                </div>
                            </div>
                        </div>
                        <group>
                            <group name="basic_info">
                                <field name="sequence"/>
                                <field name="retention_years" required="1"/>
                                <field name="retention_unit"/>
                                <field name="destruction_method" required="1"/>
                                <field name="is_expired" readonly="1"/>
                            </group>
                            <group name="status_info">
                                <field name="compliance_status" widget="badge"/>
                                <field name="effective_date"/>
                                <field name="expiration_date"/>
                                <field name="last_review_date"/>
                                <field name="next_review_date"/>
                            </group>
                        </group>
                        <notebook>
                            <page string="Policy Details" name="details">
                                <group>
                                    <field name="description" widget="html"
                                           placeholder="Detailed description of the retention policy..."/>
                                </group>
                                <group string="Legal Requirements">
                                    <field name="legal_requirements" widget="text"
                                           placeholder="Legal and regulatory requirements..."/>
                                </group>
                                <group string="Compliance Notes">
                                    <field name="compliance_notes" widget="text"
                                           placeholder="Additional compliance information..."/>
                                </group>
                            </page>
                            <page string="Retention Rules" name="rules">
                                <field name="rule_ids" mode="tree" limit="20">
                                    <tree>
                                        <field name="name"/>
                                        <field name="retention_years"/>
                                        <field name="destruction_method"/>
                                        <field name="document_type_id"/>
                                        <field name="state"/>
                                    </tree>
                                </field>
                            </page>
                            <page string="Documents" name="documents">
                                <field name="document_ids" mode="tree" limit="20">
                                    <tree>
                                        <field name="name"/>
                                        <field name="reference"/>
                                        <field name="document_type"/>
                                        <field name="creation_date"/>
                                        <field name="retention_until"/>
                                    </tree>
                                </field>
                            </page>
                            <page string="Child Policies" name="children">
                                <field name="child_policy_ids" mode="tree">
                                    <tree>
                                        <field name="name"/>
                                        <field name="code"/>
                                        <field name="state"/>
                                        <field name="retention_years"/>
                                    </tree>
                                </field>
                            </page>
                            <page string="Policy Versions" name="versions">
                                <field name="version_ids" mode="tree">
                                    <tree>
                                        <field name="name"/>
                                        <field name="version"/>
                                        <field name="effective_date"/>
                                        <field name="approval_status"/>
                                    </tree>
                                </field>
                            </page>
                            <page string="Audit Trail" name="audit">
                                <group>
                                    <group string="Review Information">
                                        <field name="reviewed_by"/>
                                        <field name="approved_by"/>
                                        <field name="approval_date"/>
                                    </group>
                                    <group string="Compliance Tracking">
                                        <field name="compliance_officer"/>
                                        <field name="regulatory_framework"/>
                                        <field name="industry_standards"/>
                                    </group>
                                </group>
                                <separator string="Audit History"/>
                                <group string="Audit Log">
                                    <field name="audit_log_ids" mode="tree" limit="10">
                                        <tree>
                                            <field name="action"/>
                                            <field name="action_date"/>
                                            <field name="user_id"/>
                                            <field name="notes"/>
                                        </tree>
                                    </field>
                                </group>
                            </page>
                        </notebook>
                    </sheet>
                    <div class="oe_chatter">
                        <field name="message_follower_ids"/>
                        <field name="activity_ids"/>
                        <field name="message_ids"/>
                    </div>
                </form>
            </field>
        </record>

        <!-- Search View for Records Retention Policy -->
        <record id="records_retention_policy_view_search" model="ir.ui.view">
            <field name="name">records.retention.policy.view.search</field>
            <field name="model">records.retention.policy</field>
            <field name="type">search</field>
            <field name="arch" type="xml">
                <search string="Search Retention Policies">
                    <field name="name"/>
                    <field name="code"/>
                    <field name="destruction_method"/>
                    <field name="compliance_officer"/>
                    <separator/>
                    <filter string="Active Policies" name="active" domain="[('state', '=', 'active')]"/>
                    <filter string="Draft Policies" name="draft" domain="[('state', '=', 'draft')]"/>
                    <filter string="Archived Policies" name="archived" domain="[('state', '=', 'archived')]"/>
                    <separator/>
                    <filter string="Compliant" name="compliant" domain="[('compliance_status', '=', 'compliant')]"/>
                    <filter string="Non-Compliant" name="non_compliant" domain="[('compliance_status', '=', 'non_compliant')]"/>
                    <filter string="Pending Review" name="pending_review" domain="[('compliance_status', '=', 'pending_review')]"/>
                    <separator/>
                    <filter string="Expired" name="expired" domain="[('is_expired', '=', True)]"/>
                    <filter string="Current" name="current" domain="[('is_expired', '=', False)]"/>
                    <group expand="1" string="Group By">
                        <filter string="Status" name="group_state" domain="[]" context="{'group_by': 'state'}"/>
                        <filter string="Compliance Status" name="group_compliance" domain="[]" context="{'group_by': 'compliance_status'}"/>
                        <filter string="Destruction Method" name="group_destruction" domain="[]" context="{'group_by': 'destruction_method'}"/>
                        <filter string="Retention Period" name="group_retention" domain="[]" context="{'group_by': 'retention_years'}"/>
                    </group>
                </search>
            </field>
        </record>

        <!-- Kanban View for Records Retention Policy -->
        <record id="records_retention_policy_view_kanban" model="ir.ui.view">
            <field name="name">records.retention.policy.view.kanban</field>
            <field name="model">records.retention.policy</field>
            <field name="type">kanban</field>
            <field name="arch" type="xml">
                <kanban class="o_kanban_mobile">
                    <field name="name"/>
                    <field name="code"/>
                    <field name="state"/>
                    <field name="compliance_status"/>
                    <field name="retention_years"/>
                    <field name="destruction_method"/>
                    <field name="document_count"/>
                    <field name="rule_count"/>
                    <templates>
                        <t t-name="kanban-box">
                            <div class="oe_kanban_card oe_kanban_global_click">
                                <div class="row">
                                    <div class="col-6">
                                        <strong><span><t t-esc="record.name.value"/></span></strong>
                                    </div>
                                    <div class="col-6">
                                        <span class="float-right badge badge-pill">
                                            <t t-esc="record.state.value"/>
                                        </span>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-12">
                                        <span>Code: <t t-esc="record.code.value"/></span>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-6">
                                        <span>
                                            <i class="fas fa-clock" aria-hidden="true"/>
                                            <t t-esc="record.retention_years.value"/> years
                                        </span>
                                    </div>
                                    <div class="col-6">
                                        <span>
                                            <i class="fas fa-shield-alt" aria-hidden="true"/>
                                            <t t-esc="record.compliance_status.value"/>
                                        </span>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-6">
                                        <span>
                                            <i class="fas fa-file-alt" aria-hidden="true"/>
                                            <t t-esc="record.document_count.value"/> docs
                                        </span>
                                    </div>
                                    <div class="col-6">
                                        <span>
                                            <i class="fas fa-gavel" aria-hidden="true"/>
                                            <t t-esc="record.rule_count.value"/> rules
                                        </span>
                                    </div>
                                </div>
                            </div>
                        </t>
                    </templates>
                </kanban>
            </field>
        </record>

        <!-- Action for Records Retention Policy -->
        <record id="action_records_retention_policy" model="ir.actions.act_window">
            <field name="name">Retention Policies</field>
            <field name="res_model">records.retention.policy</field>
            <field name="view_mode">tree,form,kanban</field>
            <field name="domain">[]</field>
            <field name="context">{}</field>
            <field name="help" type="html">
                <p class="o_view_nocontent_smiling_face">
                    <i class="fas fa-gavel" aria-hidden="true"/>
                    No retention policies found!
                </p>
                <p>
                    <i class="fas fa-info-circle" aria-hidden="true"/>
                    Retention policies define how long documents must be kept and how they should be destroyed.
                    Create comprehensive policies to ensure compliance with legal and regulatory requirements.
                </p>
                <p>
                    <strong>Key Features:</strong>
                    <br/>
                    <i class="fas fa-clock" aria-hidden="true"/>
                    Define retention periods and destruction methods
                    <br/>
                    <i class="fas fa-shield-alt" aria-hidden="true"/>
                    Ensure compliance with legal requirements
                    <br/>
                    <i class="fas fa-bar-chart" aria-hidden="true"/>
                    Track compliance status and review cycles
                    <br/>
                    <i class="fas fa-globe" aria-hidden="true"/>
                    Support global and regional policy variations
                </p>
            </field>
        </record>

        <!-- Menu Item for Records Retention Policy -->
        <menuitem id="menu_retention_policies"
                  name="Retention Policies"
                  parent="records_management.menu_records_management_config"
                  action="action_records_retention_policy"
                  sequence="10"/>
    </data>
</odoo>
