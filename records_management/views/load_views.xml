<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>
        <record id="load_view_kanban" model="ir.ui.view">
            <field name="name">load.view.kanban</field>
            <field name="model">paper.bale.load</field>
            <field name="arch" type="xml">
                <kanban default_group_by="state" sample="1" quick_create="false" class="o_kanban_small_column">
                    <field name="name" />
                    <field name="state" />
                    <field name="total_weight" />
                    <field name="total_bales" />
                    <field name="load_date" />
                    <field name="buyer_id" />
                    <field name="activity_ids" />
                    <progressbar field="state" colors="{&quot;draft&quot;: &quot;secondary&quot;, &quot;loading&quot;: &quot;warning&quot;, &quot;ready_for_pickup&quot;: &quot;info&quot;, &quot;picked_up&quot;: &quot;success&quot;}" />
                    <templates>
                        <t t-name="card">
                            <div class="oe_kanban_global_click">
                                <div class="o_kanban_record_top">
                                    <div class="o_kanban_record_headings">
                                        <strong class="o_kanban_record_title">
                                            <field name="name" />
                                        </strong>
                                        <span class="float-end">
                                            <field name="state" widget="label_selection" options="{'classes': {'draft': 'secondary', 'ready': 'primary', 'loading': 'warning', 'shipped': 'info', 'sold': 'success', 'cancelled': 'danger'}}" />
                                        </span>
                                    </div>
                                    <span class="o_kanban_record_subtitle text-muted">
                                        <i class="fa fa-cubes" title="Bales"/>
                                        <field name="total_bales" /> bales | <field name="buyer_id" />
                                    </span>
                                </div>
                                <div class="o_kanban_record_body">
                                    <div class="row">
                                        <div class="col-6">
                                            <strong>Weight:</strong>
                                            <field name="total_weight" widget="float" /> lbs<br />
                                            <strong>Date:</strong>
                                            <field name="load_date" widget="date" />
                                        </div>
                                        <div class="col-6">
                                            <strong>Total Bales:</strong>
                                            <field name="total_bales" />
                                            <br />
                                            <strong>Status:</strong>
                                            <field name="state" />
                                        </div>
                                    </div>
                                    <div class="mt-2">
                                        <field name="activity_ids" widget="kanban_activity" />
                                    </div>
                                </div>
                                <div class="o_kanban_record_bottom">
                                    <div class="oe_kanban_bottom_left">
                                        <span class="badge badge-pill badge-info">
                                            <i class="fa fa-cog" title="Weight"/>
                                            <field name="total_weight" widget="float" /> lbs
                                        </span>
                                    </div>
                                    <div class="oe_kanban_bottom_right">
                                        <field name="state" widget="label_selection" options="{'classes': {'draft': 'secondary', 'loading': 'warning', 'ready_for_pickup': 'info', 'picked_up': 'success'}}" />
                                    </div>
                                </div>
                            </div>
                        </t>
                    </templates>
                </kanban>
            </field>
        </record>
                <record id="load_view_list" model="ir.ui.view">
            <field name="name">paper.bale.load.view.list</field>
            <field name="model">paper.bale.load</field>
            <field name="arch" type="xml">
                <list string="Paper Bale Load Management" decoration-info="state=='ready_for_pickup'" decoration-warning="state=='loading'" decoration-muted="state=='cancel'" multi_edit="1" sample="1">
                    <field name="name" string="Load #" />
                    <field name="load_date" widget="date" />
                    <field name="buyer_id" string="Buyer" />
                    <field name="total_bales" string="Bales" sum="Total Bales" />
                    <field name="total_weight" string="Weight (lbs)" widget="float" sum="Total Weight" />
                    <field name="state" string="Status" widget="badge" decoration-info="state=='ready_for_pickup'" decoration-warning="state=='loading'" />
                    <field name="activity_exception_decoration" widget="activity_exception" />
                </list>
            </field>
        </record>
        <record id="load_view_form" model="ir.ui.view">
            <field name="name">load.view.form</field>
            <field name="model">paper.bale.load</field>
            <field name="arch" type="xml">
                <form string="Paper Bale Load Management">
                    <header>
                        <button name="action_mark_ready_for_pickup" string="Mark Ready for Pickup" type="object" class="btn-primary" invisible="state != 'draft'" />
                        <button name="action_mark_picked_up" string="Mark Picked Up" type="object" class="btn-primary" invisible="state != 'ready_for_pickup'" />
                        <button name="action_generate_manifest" string="Generate Manifest" type="object" class="btn-info" invisible="state != 'picked_up'" />
                        <button name="action_create_invoice" string="Create Invoice" type="object" class="btn-success" invisible="state != 'loading'" />
                        <button name="action_cancel" string="Cancel" type="object" invisible="state not in ['draft', 'ready_for_pickup', 'loading', 'picked_up']" />
                        <field name="state" widget="statusbar" statusbar_visible="draft,ready_for_pickup,loading,picked_up,invoiced,paid" />
                    </header>
                    <sheet>
                        <div class="oe_title">
                            <h1>
                                <field name="name" placeholder="Load Number" />
                            </h1>
                            <div class="o_row">
                                <field name="load_date" widget="date" />
                                <label for="buyer_id" string="Buyer:" />
                                <field name="buyer_id" placeholder="Paper Company" />
                            </div>
                        </div>
                        <group>
                            <group name="load_details" string="Load Details">
                                <field name="total_weight" widget="float" />
                                <field name="total_bales" />
                                <field name="priority" widget="priority" />
                                <field name="active" widget="boolean_toggle" />
                            </group>
                            <group name="logistics" string="Logistics">
                                <field name="pickup_date" widget="date" />
                                <field name="driver_name" />
                                <field name="driver_signature" />
                                <field name="completion_date" widget="date" invisible="state not in ['picked_up', 'invoiced', 'paid']" />
                            </group>
                        </group>
                        <group name="tracking" string="Notes">
                            <field name="notes" placeholder="Additional information..." />
                        </group>
                        <notebook>
                            <page string="Load Items" name="load_items">
                                <field name="paper_bale_ids" mode="list,kanban">
                                    <list string="Paper Bales" editable="bottom">
                                        <field name="bale_number" />
                                        <field name="weight" sum="Total Weight" />
                                        <field name="paper_grade" />
                                        <field name="state" />
                                        <field name="location_id" />
                                    </list>
                                    <kanban>
                                        <field name="bale_number" />
                                        <field name="weight" />
                                        <field name="paper_grade" />
                                        <field name="state" />
                                        <templates>
                                            <t t-name="card">
                                                <div class="oe_kanban_global_click">
                                                    <div class="o_kanban_record_top">
                                                        <strong>
                                                            <field name="bale_number" />
                                                        </strong>
                                                        <span class="float-end">Grade: <field name="paper_grade" />
                                                        </span>
                                                    </div>
                                                    <div class="o_kanban_record_body">
                                                Weight: <field name="weight" /> kg<br />
                                                State: <field name="state" />
                                            </div>
                                                </div>
                                            </t>
                                        </templates>
                                    </kanban>
                                </field>
                            </page>
                            <page string="Weight Summary" name="weight_summary">
                                <group>
                                    <group string="Total Weights">
                                        <field name="total_weight" />
                                        <field name="total_weight_wht" string="WHT Weight" />
                                        <field name="total_weight_mix" string="MIX Weight" />
                                        <field name="total_weight_occ" string="OCC Weight" />
                                    </group>
                                    <group string="Financial Information">
                                        <field name="invoice_id" />
                                        <field name="payment_status" />
                                        <field name="currency_id" />
                                    </group>
                                </group>
                                <separator string="Manifest" />
                                <group>
                                    <field name="manifest_filename" />
                                    <field name="manifest_document" widget="binary" filename="manifest_filename" />
                                </group>
                            </page>
                        </notebook>
                    </sheet>
                    <div class="oe_chatter">
                        <field name="message_follower_ids" />
                        <field name="activity_ids" />
                        <field name="message_ids" />
                    </div>
                </form>
            </field>
        </record>
        <record id="load_view_search" model="ir.ui.view">
            <field name="name">load.view.search</field>
            <field name="model">paper.bale.load</field>
            <field name="arch" type="xml">
                <search string="Search Loads">
                    <field name="name" string="Load #" filter_domain="[('name', 'ilike', self)]" />
                    <field name="buyer_id" string="Buyer" />
                    <field name="load_date" string="Load Date" />
                    <filter string="Draft" name="draft" domain="[('state', '=', 'draft')]" />
                    <filter string="Ready for Pickup" name="ready" domain="[('state', '=', 'ready_for_pickup')]" />
                    <filter string="Loading" name="loading" domain="[('state', '=', 'loading')]" />
                    <filter string="Picked Up" name="picked_up" domain="[('state', '=', 'picked_up')]" />
                    <separator />
                    <filter string="Active" name="active_only" domain="[('active', '=', True)]" />
                    <group expand="0" string="Group By">
                        <filter string="Status" name="group_state" context="{'group_by': 'state'}" />
                        <filter string="Buyer" name="group_buyer" context="{'group_by': 'buyer_id'}" />
                        <filter string="Load Date" name="group_date" context="{'group_by': 'load_date'}" />
                    </group>
                </search>
            </field>
        </record>
        <record id="load_view_calendar" model="ir.ui.view">
            <field name="name">load.view.calendar</field>
            <field name="model">paper.bale.load</field>
            <field name="arch" type="xml">
                <calendar string="Load Schedule" date_start="load_date" date_stop="completion_date" color="buyer_id" mode="month">
                    <field name="name" />
                    <field name="buyer_id" />
                    <field name="state" />
                </calendar>
            </field>
        </record>
        <record id="load_view_graph" model="ir.ui.view">
            <field name="name">load.view.graph</field>
            <field name="model">paper.bale.load</field>
            <field name="arch" type="xml">
                <graph string="Load Analytics" type="bar" sample="1">
                    <field name="load_date" type="row" interval="week" />
                    <field name="state" type="col" />
                    <field name="total_weight" type="measure" />
                </graph>
            </field>
        </record>
        <record id="load_view_pivot" model="ir.ui.view">
            <field name="name">load.view.pivot</field>
            <field name="model">paper.bale.load</field>
            <field name="arch" type="xml">
                <pivot string="Load Performance" sample="1">
                    <field name="buyer_id" type="row" />
                    <field name="state" type="col" />
                    <field name="total_weight" type="measure" />
                    <field name="total_bales" type="measure" />
                </pivot>
            </field>
        </record>
        <record id="action_load" model="ir.actions.act_window">
            <field name="name">Paper Bale Load Management</field>
            <field name="res_model">paper.bale.load</field>
            <field name="view_mode">list,form,calendar,graph,pivot</field>
            <field name="search_view_id" ref="load_view_search" />
            <field name="context">{}</field>
            <field name="help" type="html">
                <p class="o_view_nocontent_smiling_face">
                    <i class="fa fa-cog" /> Create your first paper bale load!
        </p>
                <p>
            Track paper bale loads for post-shredding market sales operations.
            Manage paper bale tracking from preparation through market sales with quality documentation, buyer management, and revenue tracking.
        </p>
                <p>
                    <strong>Key Features:</strong>
                    <br />
            • Paper bale quantity and weight tracking<br />
            • Market pricing and buyer management<br />
            • Quality grades and contamination monitoring<br />
            • Revenue estimation and sales documentation<br />
            • Load preparation and shipping coordination<br />
            • Paper market sales analytics and reporting
        </p>
            </field>
        </record>
    </data>
</odoo>
