<?xml version="1.0" encoding="utf-8"?>
<odoo>

<data>
<!-- Enhanced Tree view for Product Extension -->
    <record id="prod_ext_view_tree" model="ir.ui.view">
        <field name="name">prod.ext.view.tree</field>
        <field name="model">prod.ext</field>
        <field name="type">list</field>
        <field name="arch" type="xml">
<tree decoration-muted="not active" decoration-info="state == 'draft'" decoration-success="state == 'confirmed'">
                <field name="name"/>
<field name="product_id" optional="show"/>
<field name="extension_type" optional="show"/>
<field name="state" decoration-info="state == 'draft'" decoration-success="state == 'confirmed'"/>
<field name="company_id" groups="base.group_multi_company" optional="hide"/>
<field name="user_id" optional="hide"/>
<field name="create_date" optional="hide"/>
<field name="active" invisible="1"/>
<field name="activity_ids" widget="list_activity" optional="show"/>

            </tree>
        </field>
    </record>

<!-- Enhanced Form view for Product Extension -->
    <record id="prod_ext_view_form" model="ir.ui.view">
        <field name="name">prod.ext.view.form</field>
        <field name="model">prod.ext</field>
        <field name="type">form</field>
        <field name="arch" type="xml">
<form string="Product Extension">
    <header>
        <button name="action_confirm" string="Confirm" type="object" states="draft" class="oe_highlight"/>
        <button name="action_cancel" string="Cancel" type="object" states="confirmed" class="btn-secondary"/>
        <field name="state" widget="statusbar" statusbar_visible="draft,confirmed"/>
    </header>
                <sheet>
<div class="oe_button_box" name="button_box">
    <button class="oe_stat_button" type="action" icon="fa-archive" attrs="{'invisible': [('product_id', '=', False)]}" context="{'default_product_id': product_id}">
        <div class="o_stat_info">
            <span class="o_stat_text">Related</span>
            <span class="o_stat_text">Records</span>
        </div>
    </button>
</div>
                    
                    <div class="oe_title">
                        <label for="name"/>
                        <h1>
<field name="name" placeholder="Product Extension Name..."/>

                        </h1>
                    </div>
<group>
    <group>
        <field name="product_id" options="{'no_create': True, 'no_create_edit': True}"/>
        <field name="extension_type"/>
        <field name="priority" widget="priority"/>
    </group>
    <group>
        <field name="user_id" options="{'no_create': True, 'no_create_edit': True}"/>
        <field name="company_id" groups="base.group_multi_company" options="{'no_create': True}"/>
        <field name="active"/>
    </group>
</group>

<notebook>
    <page string="📋 Extension Details">
        <group>
            <field name="description" placeholder="Detailed description of the product extension..."/>
            <field name="notes" placeholder="Additional notes and comments..."/>
        </group>
    </page>
    <page string="🔒 Compliance &amp; Audit">
        <group>
            <group string="Tracking Information">
                <field name="create_date" readonly="1"/>
                <field name="write_date" readonly="1"/>
                <field name="create_uid" readonly="1"/>
                <field name="write_uid" readonly="1"/>
            </group>
        </group>
    </page>
</notebook>
                </sheet>
<!-- Mail Thread Integration -->
<div class="oe_chatter">
    <field name="message_follower_ids"/>
    <field name="activity_ids"/>
    <field name="message_ids"/>
</div>
            </form>
        </field>
    </record>

<!-- Enhanced Search view -->
    <record id="prod_ext_view_search" model="ir.ui.view">
        <field name="name">prod.ext.view.search</field>
        <field name="model">prod.ext</field>
        <field name="type">search</field>
        <field name="arch" type="xml">
            <search>
<field name="name" string="Name" filter_domain="[('name', 'ilike', self)]"/>
<field name="product_id" string="Product"/>
<field name="extension_type" string="Type"/>
<field name="user_id" string="Assigned User"/>

<separator/>

<!-- Status Filters -->
<filter string="📝 Draft" name="draft" domain="[('state', '=', 'draft')]"/>
<filter string="✅ Confirmed" name="confirmed" domain="[('state', '=', 'confirmed')]"/>

<separator/>

<!-- Quick Filters -->
<filter string="🟢 Active" name="active" domain="[('active', '=', True)]"/>
<filter string="🔴 Inactive" name="inactive" domain="[('active', '=', False)]"/>
<filter string="👤 My Extensions" name="my_extensions" domain="[('user_id', '=', uid)]"/>

<separator/>

<!-- Date Filters -->
<filter string="📅 This Week" name="this_week" domain="[('create_date', '&gt;=', (context_today() - relativedelta(weeks=1)).strftime('%Y-%m-%d'))]"/>
<filter string="📅 This Month" name="this_month" domain="[('create_date', '&gt;=', (context_today() - relativedelta(months=1)).strftime('%Y-%m-%d'))]"/>

<separator/>

<!-- Group By Options -->
                <group expand="1" string="Group By">
<filter string="📦 Product" name="group_product" domain="[]" context="{'group_by': 'product_id'}"/>
<filter string="🏷️ Extension Type" name="group_type" domain="[]" context="{'group_by': 'extension_type'}"/>
<filter string="📊 Status" name="group_state" domain="[]" context="{'group_by': 'state'}"/>
<filter string="👤 Assigned User" name="group_user" domain="[]" context="{'group_by': 'user_id'}"/>
<filter string="🏢 Company" name="group_company" domain="[]" context="{'group_by': 'company_id'}" groups="base.group_multi_company"/>
<filter string="📅 Creation Date" name="group_create_date" domain="[]" context="{'group_by': 'create_date'}"/>

                </group>
            </search>
        </field>
    </record>

<!-- Enhanced Kanban view -->
<record id="prod_ext_view_kanban" model="ir.ui.view">
    <field name="name">prod.ext.view.kanban</field>
    <field name="model">prod.ext</field>
    <field name="type">kanban</field>
        <field name="arch" type="xml">
        <kanban default_group_by="state" class="o_kanban_small_column o_kanban_prod_ext">
            <field name="name"/>
            <field name="product_id"/>
            <field name="state"/>
            <field name="user_id"/>
            <field name="priority"/>
            <field name="activity_ids"/>
            <field name="activity_state"/>

            <templates>
                <t t-name="kanban-box">
                    <div t-attf-class="oe_kanban_card oe_kanban_global_click #{kanban_color(record.priority.raw_value)}">
                        <div class="oe_kanban_content">
                            <div class="o_kanban_record_top">
                                <div class="o_kanban_record_headings">
                                    <strong class="o_kanban_record_title">
                                        <field name="name"/>
                                    </strong>
                                </div>
                                <div class="o_kanban_manage_button_section">
                                    <a class="o_kanban_manage_toggle_button" href="#">
                                        <i class="fa fa-ellipsis-v" role="img" aria-label="Manage" title="Manage"/>
                                    </a>
                                </div>
                            </div>

                            <div class="o_kanban_record_body">
                                <field name="product_id" class="o_text_overflow"/>
                                <t t-if="record.extension_type.value">
                                    <div class="text-muted">
                                        <i class="fa fa-tag"/>
                                        <field name="extension_type"/>
                                    </div>
                                </t>
                            </div>

                            <div class="o_kanban_record_bottom">
                                <div class="oe_kanban_bottom_left">
                                    <field name="priority" widget="priority"/>
                                    <field name="activity_ids" widget="kanban_activity"/>
                                </div>
                                <div class="oe_kanban_bottom_right">
                                    <img t-att-src="kanban_image('res.users', 'avatar_128', record.user_id.raw_value)" t-att-title="record.user_id.value" t-att-alt="record.user_id.value" class="oe_kanban_avatar"/>
                                </div>
                            </div>
                        </div>

                        <div class="oe_kanban_manage_button_section">
                            <div class="o_kanban_manage_view">
                                <a type="edit" class="btn btn-primary btn-sm">Edit</a>
                                <a type="delete" class="btn btn-secondary btn-sm">Delete</a>
                            </div>
                        </div>
                    </div>
                </t>
            </templates>
        </kanban>
    </field>
</record>

<!-- Enhanced Action -->
    <record id="action_prod_ext" model="ir.actions.act_window">
<field name="name">Product Extensions</field>
        <field name="type">ir.actions.act_window</field>
        <field name="res_model">prod.ext</field>
<field name="view_mode">kanban,list,form</field>
        <field name="domain">[]</field>
<field name="context">{
            'default_user_id': uid,
            'search_default_active': 1
        }</field>
        <field name="help" type="html">
<p class="o_view_nocontent_smiling_face">
                📦 Create your first Product Extension!
</p>
<p>
    <b>Enterprise Product Extension Management:</b>
    <br/>
                • 🔧 Advanced product customization and extensions<br/>
                • 📊 Complete lifecycle tracking and management<br/>
                • 🔗 Full integration with Records Management system<br/>
                • 📋 Comprehensive audit trails and compliance<br/>
                • 👥 Collaborative workflows with activity tracking<br/>
                • 📈 Real-time analytics and performance monitoring<br/>
                • ⚡ Automated notifications and reminders<br/>
                • 🔒 Role-based access control and security<br/>
                • 📱 Mobile-friendly interface and operations
            </p>
        </field>
    </record>
</data>

</odoo>
