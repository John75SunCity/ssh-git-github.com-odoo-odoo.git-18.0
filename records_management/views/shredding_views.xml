<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <!-- üí• ENTERPRISE SHREDDING SERVICES - NAID AAA CERTIFIED -->
    
    <!-- üé® NAID Compliant Shredding Kanban Dashboard -->
    <record id="view_shredding_service_kanban" model="ir.ui.view">
        <field name="name">shredding.service.kanban</field>
        <field name="model">shredding.service</field>
        <field name="arch" type="xml">
            <kanban default_group_by="status" class="o_kanban_shredding_dashboard">
                <field name="name"/>
                <field name="customer_id"/>
                <field name="service_type"/>
                <field name="status"/>
                <field name="scheduled_date"/>
                <field name="destruction_method"/>
                <field name="naid_compliance_level"/>
                <field name="certificate_required"/>
                <field name="witness_required"/>
                <templates>
                    <t t-name="card">
                        <div class="oe_kanban_card oe_kanban_global_click">
                            <div class="o_kanban_card_header">
                                <div class="o_kanban_card_header_title">
                                    <div class="o_primary">
                                        <strong>üí• <field name="name"/></strong>
                                    </div>
                                    <div class="o_secondary">
                                        üë§ <field name="customer_id"/>
                                    </div>
                                </div>
                                <div class="o_kanban_manage_button_section">
                                    <a class="o_kanban_manage_toggle_button" href="#"><i class="fa fa-ellipsis-v" title="More options"/></a>
                                </div>
                            </div>
                            <div class="o_kanban_card_content">
                                <div class="row">
                                    <div class="col-8">
                                        <div><i class="fa fa-cogs"/> <field name="service_type"/></div>
                                        <div><i class="fa fa-calendar"/> <field name="scheduled_date"/></div>
                                        <div><i class="fa fa-shield" title="Security"/> <field name="destruction_method"/></div>
                                    </div>
                                    <div class="col-4">
                                        <span class="badge" t-att-class="record.naid_compliance_level.raw_value === 'AAA' ? 'badge-success' : record.naid_compliance_level.raw_value === 'AA' ? 'badge-warning' : 'badge-secondary'">
                                            üèÜ <field name="naid_compliance_level"/>
                                        </span>
                                        <span class="badge badge-info" t-if="record.certificate_required.raw_value">
                                            üìú Cert Required
                                        </span>
                                    </div>
                                </div>
                                <div class="row mt-2">
                                    <div class="col-6">
                                        <button class="btn btn-primary btn-sm" type="object" name="action_start_destruction">
                                            üöÄ Start
                                        </button>
                                    </div>
                                    <div class="col-6">
                                        <button class="btn btn-success btn-sm" type="object" name="action_generate_certificate">
                                            üìú Certificate
                                        </button>
                                    </div>
                                </div>
                            </div>
                            <div class="o_kanban_card_manage_pane dropdown-menu" role="menu">
                                <a role="menuitem" type="edit" class="dropdown-item">‚úèÔ∏è Edit Service</a>
                                <a role="menuitem" type="object" name="action_view_items" class="dropdown-item">üìÑ View Items</a>
                                <a role="menuitem" type="object" name="action_witness_verification" class="dropdown-item">üëÅÔ∏è Witness Verification</a>
                                <a role="menuitem" type="object" name="action_compliance_check" class="dropdown-item">üèÜ NAID Compliance</a>
                                <div class="dropdown-divider"/>
                                <a role="menuitem" type="object" name="action_generate_certificate" class="dropdown-item">üìú Generate Certificate</a>
                            </div>
                        </div>
                    </t>
                </templates>
            </kanban>
        </field>
    </record>

    <!-- üìã Enhanced Tree with NAID Compliance Tracking -->
    <record id="view_shredding_service_tree" model="ir.ui.view">
        <field name="name">shredding.service.list</field>
        <field name="model">shredding.service</field>
        <field name="arch" type="xml">
            <list decoration-success="status == 'completed' and naid_compliance_verified == True" 
                  decoration-warning="status == 'in_progress'"
                  decoration-danger="scheduled_date &lt; context_today() and status == 'confirmed'"
                  decoration-info="certificate_required == True">
                <field name="name" string="üí• Service ID"/>
                <field name="customer_id" string="üë§ Customer"/>
                <field name="service_type" string="üîß Service Type"/>
                <field name="destruction_method" string="üõ°Ô∏è Method"/>
                <field name="scheduled_date" string="üìÖ Scheduled"/>
                <field name="naid_compliance_level" string="üèÜ NAID Level" widget="badge"/>
                <field name="witness_required" string="üëÅÔ∏è Witness" widget="boolean_toggle"/>
                <field name="certificate_required" string="üìú Certificate" widget="boolean_toggle"/>
                <field name="naid_compliance_verified" string="‚úÖ Verified" widget="boolean_toggle"/>
                <field name="status" string="üéØ Status" widget="badge"/>
                <button name="action_start_destruction" type="object" string="Start" 
                        icon="fa-play" class="btn-link" 
                        invisible="status != 'confirmed'"/>
                <button name="action_generate_certificate" type="object" string="Certificate" 
                        icon="fa-certificate" class="btn-link"/>
            </list>
        </field>
    </record>

    <!-- üìù Enhanced Form with Complete NAID AAA Workflow -->
    <record id="view_shredding_service_form" model="ir.ui.view">
        <field name="name">shredding.service.form</field>
        <field name="model">shredding.service</field>
        <field name="arch" type="xml">
            <form>
                <header>
                    <button name="action_start_destruction" type="object" string="üöÄ Start Destruction" 
                            class="btn-primary" invisible="status != 'confirmed'"/>
                    <button name="action_witness_verification" type="object" string="üëÅÔ∏è Witness Verification" 
                            class="btn-secondary" invisible="not witness_required"/>
                    <button name="action_compliance_check" type="object" string="üèÜ NAID Compliance Check" class="btn-info"/>
                    <button name="action_generate_certificate" type="object" string="üìú Generate Certificate" 
                            class="btn-success" invisible="status != 'completed'"/>
                    <field name="status" widget="statusbar" statusbar_visible="draft,confirmed,in_progress,completed,invoiced"/>
                </header>
                <sheet>
                    <div class="oe_button_box" name="button_box">
                        <button class="oe_stat_button" type="object" name="action_view_items" icon="fa-file-text">
                            <field string="Items to Destroy" name="item_count" widget="statinfo"/>
                        </button>
                        <button class="oe_stat_button" type="object" name="action_view_witnesses" icon="fa-eye">
                            <field string="Witnesses" name="witness_count" widget="statinfo"/>
                        </button>
                        <button class="oe_stat_button" type="object" name="action_view_certificates" icon="fa-certificate">
                            <field string="Certificates" name="certificate_count" widget="statinfo"/>
                        </button>
                        <button class="oe_stat_button" icon="fa-shield" 
                                invisible="not naid_compliance_verified">>
                            <div class="o_field_widget o_stat_info">
                                <span class="o_stat_value">üèÜ</span>
                                <span class="o_stat_text">NAID Verified</span>
                            </div>
                        </button>
                    </div>
                    
                    <group>
                        <group string="üí• Service Information">
                            <field name="name" placeholder="e.g., SHRED-2024-001"/>
                            <field name="customer_id"/>
                            <field name="service_type"/>
                            <field name="destruction_method"/>
                            <field name="service_location"/>
                        </group>
                        <group string="üèÜ NAID AAA Compliance">
                            <field name="naid_compliance_level"/>
                            <field name="naid_compliance_verified" widget="boolean_toggle"/>
                            <field name="witness_required" widget="boolean_toggle"/>
                            <field name="certificate_required" widget="boolean_toggle"/>
                            <field name="chain_of_custody_maintained" widget="boolean_toggle"/>
                        </group>
                    </group>
                    
                    <group>
                        <group string="üìÖ Scheduling">
                            <field name="scheduled_date"/>
                            <field name="estimated_duration"/>
                            <field name="actual_start_time"/>
                            <field name="actual_completion_time"/>
                        </group>
                        <group string="üë• Personnel">
                            <field name="assigned_technician"/>
                            <field name="supervising_manager"/>
                            <field name="customer_representative"/>
                            <field name="security_officer"/>
                        </group>
                    </group>
                    
                    <notebook>
                        <page string="üíΩ Hard Drive Scanning" name="hard_drives" invisible="service_type != 'hard_drive'">>
                            <div class="row">
                                <div class="col-md-6">
                                    <div class="alert alert-info">
                                        <h4>üìä Scanning Progress</h4>
                                        <p><strong>Scanned at Customer:</strong> <field name="hard_drive_scanned_count" readonly="1"/> drives</p>
                                        <p><strong>Verified at Facility:</strong> <field name="hard_drive_verified_count" readonly="1"/> drives</p>
                                        <p><strong>Manual Quantity:</strong> <field name="quantity" readonly="1"/> (for billing)</p>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="btn-group" role="group">
                                        <button name="action_scan_hard_drives_customer" type="object" 
                                                string="üì± Scan at Customer" class="btn btn-primary"/>
                                        <button name="action_scan_hard_drives_facility" type="object" 
                                                string="üè≠ Verify at Facility" class="btn btn-warning"
                                                invisible="hard_drive_scanned_count == 0"/>
                                        <button name="action_view_hard_drives" type="object" 
                                                string="üëÅÔ∏è View All Drives" class="btn btn-secondary"/>
                                    </div>
                                </div>
                            </div>
                            
                            <separator string="Hard Drive Details"/>
                            <field name="hard_drive_ids" mode="list">
                                <list decoration-success="destroyed" 
                                      decoration-warning="verified_before_destruction and not destroyed"
                                      decoration-info="scanned_at_customer and not verified_before_destruction">
                                    <field name="serial_number"/>
                                    <field name="scanned_at_customer" widget="boolean_toggle"/>
                                    <field name="scanned_at_customer_date"/>
                                    <field name="verified_before_destruction" widget="boolean_toggle"/>
                                    <field name="verified_at_facility_date"/>
                                    <field name="destroyed" widget="boolean_toggle"/>
                                    <field name="destruction_method"/>
                                    <field name="included_in_certificate" widget="boolean_toggle"/>
                                    <button name="action_mark_customer_scanned" type="object" 
                                            string="üì± Mark Scanned" icon="fa-qrcode" class="btn-link"
                                            invisible="scanned_at_customer"/>
                                    <button name="action_mark_facility_verified" type="object" 
                                            string="üè≠ Mark Verified" icon="fa-check" class="btn-link"
                                            invisible="verified_before_destruction or not scanned_at_customer"/>
                                    <button name="action_mark_destroyed" type="object" 
                                            string="üí• Mark Destroyed" icon="fa-times" class="btn-link"
                                            invisible="destroyed or not verified_before_destruction"/>
                                </list>
                            </field>
                        </page>
                        <page string="ÔøΩüìÑ Items for Destruction" name="items">
                            <field name="destruction_item_ids" mode="list">
                                <list editable="bottom">
                                    <field name="item_type"/>
                                    <field name="description"/>
                                    <field name="confidentiality_level"/>
                                    <field name="quantity"/>
                                    <field name="unit_of_measure"/>
                                    <field name="verified_by_customer"/>
                                    <field name="chain_of_custody_number"/>
                                </list>
                            </field>
                        </page>
                        <page string="üëÅÔ∏è Witness Verification" name="witnesses">
                            <field name="witness_verification_ids" mode="list">
                                <list>
                                    <field name="witness_name"/>
                                    <field name="witness_title"/>
                                    <field name="company"/>
                                    <field name="verification_date"/>
                                    <field name="signature_verified"/>
                                    <field name="photo_id_verified"/>
                                    <button name="action_verify_witness" type="object" string="Verify" icon="fa-check" class="btn-link"/>
                                </list>
                            </field>
                        </page>
                        <page string="üõ°Ô∏è Destruction Process" name="process">
                            <group>
                                <group string="üîß Equipment &amp; Method">
                                    <field name="shredding_equipment"/>
                                    <field name="particle_size"/>
                                    <field name="destruction_standard"/>
                                    <field name="equipment_calibration_date"/>
                                </group>
                                <group string="üìä Process Verification">
                                    <field name="pre_destruction_weight"/>
                                    <field name="post_destruction_weight"/>
                                    <field name="destruction_efficiency"/>
                                    <field name="quality_control_passed"/>
                                </group>
                            </group>
                            <field name="destruction_notes" placeholder="Detailed destruction process notes and any anomalies..."/>
                        </page>
                        <page string="üìú Certification" name="certification">
                            <group>
                                <group string="üìã Certificate Details">
                                    <field name="certificate_number"/>
                                    <field name="certificate_date"/>
                                    <field name="certificate_type"/>
                                    <field name="naid_member_id"/>
                                </group>
                                <group string="‚úÖ Verification">
                                    <field name="destruction_photographed"/>
                                    <field name="video_recorded"/>
                                    <field name="third_party_verified"/>
                                    <field name="environmental_compliance"/>
                                </group>
                            </group>
                            <field name="certificate_notes" placeholder="Certification notes and compliance verification details..."/>
                        </page>
                        <page string="üîç Audit Trail" name="audit">
                            <field name="audit_trail_ids" mode="list">
                                <list>
                                    <field name="timestamp"/>
                                    <field name="action"/>
                                    <field name="user_id"/>
                                    <field name="location"/>
                                    <field name="compliance_status"/>
                                    <field name="notes"/>
                                </list>
                            </field>
                        </page>
                        <page string="üìã Chain of Custody" name="custody">
                            <field name="chain_of_custody_ids" mode="list">
                                <list>
                                    <field name="transfer_date"/>
                                    <field name="from_person"/>
                                    <field name="to_person"/>
                                    <field name="transfer_location"/>
                                    <field name="seal_number"/>
                                    <field name="signature_required"/>
                                    <field name="verified"/>
                                </list>
                            </field>
                        </page>
                    </notebook>
                </sheet>
                <div class="oe_chatter">
                    <field name="message_follower_ids"/>
                    <field name="activity_ids"/>
                    <field name="message_ids"/>
                </div>
            </form>
        </field>
    </record>

    <!-- üìÖ Calendar View for Destruction Scheduling -->
    <record id="view_shredding_service_calendar" model="ir.ui.view">
        <field name="name">shredding.service.calendar</field>
        <field name="model">shredding.service</field>
        <field name="arch" type="xml">
            <calendar string="üìÖ Destruction Schedule" 
                      date_start="scheduled_date" 
                      date_stop="actual_completion_time"
                      color="naid_compliance_level">
                <field name="name"/>
                <field name="customer_id"/>
                <field name="service_type"/>
                <field name="naid_compliance_level"/>
                <field name="witness_required"/>
            </calendar>
        </field>
    </record>

    <!-- üìà Graph View for NAID Compliance Analytics -->
    <record id="view_shredding_service_graph" model="ir.ui.view">
        <field name="name">shredding.service.graph</field>
        <field name="model">shredding.service</field>
        <field name="arch" type="xml">
            <graph string="üìä NAID Compliance Analytics">
                <field name="naid_compliance_level" type="row"/>
                <field name="service_type" type="col"/>
            </graph>
        </field>
    </record>

    <!-- üîç Enhanced Search with NAID Compliance Filters -->
    <record id="view_shredding_service_search" model="ir.ui.view">
        <field name="name">shredding.service.search</field>
        <field name="model">shredding.service</field>
        <field name="arch" type="xml">
            <search>
                <field name="name" string="Service"/>
                <field name="customer_id"/>
                <field name="service_type"/>
                <field name="assigned_technician"/>
                
                <filter string="ÔøΩ Draft" name="draft" domain="[('status', '=', 'draft')]"/>
                <filter string="‚úÖ Confirmed" name="confirmed" domain="[('status', '=', 'confirmed')]"/>
                <filter string="üöÄ In Progress" name="in_progress" domain="[('status', '=', 'in_progress')]"/>
                <filter string="‚úÖ Completed" name="completed" domain="[('status', '=', 'completed')]"/>
                <filter string="ÔøΩ Invoiced" name="invoiced" domain="[('status', '=', 'invoiced')]"/>
                
                <separator/>
                <filter string="üèÜ NAID AAA" name="naid_aaa" domain="[('naid_compliance_level', '=', 'AAA')]"/>
                <filter string="ü•à NAID AA" name="naid_aa" domain="[('naid_compliance_level', '=', 'AA')]"/>
                <filter string="ü•â NAID A" name="naid_a" domain="[('naid_compliance_level', '=', 'A')]"/>
                <filter string="‚úÖ NAID Verified" name="naid_verified" domain="[('naid_compliance_verified', '=', True)]"/>
                
                <separator/>
                <filter string="üëÅÔ∏è Witness Required" name="witness_required" domain="[('witness_required', '=', True)]"/>
                <filter string="üìú Certificate Required" name="certificate_required" domain="[('certificate_required', '=', True)]"/>
                <filter string="üîó Chain of Custody" name="chain_custody" domain="[('chain_of_custody_maintained', '=', True)]"/>
                
                <separator/>
                <filter string="üìÖ Today" name="today" domain="[('scheduled_date', '=', context_today())]"/>
                <filter string="üìÜ This Week" name="this_week" 
                        domain="[('scheduled_date', '&gt;=', (context_today() - relativedelta(days=context_today().weekday())).strftime('%Y-%m-%d')), 
                                ('scheduled_date', '&lt;', (context_today() + relativedelta(days=7-context_today().weekday())).strftime('%Y-%m-%d'))]"/>
                <filter string="üóìÔ∏è This Month" name="this_month" 
                        domain="[('scheduled_date', '&gt;=', context_today().strftime('%Y-%m-01'))]"/>
                
                <group expand="0" string="üìä Group By">
                    <filter string="Customer" name="group_by_customer" context="{'group_by': 'customer_id'}"/>
                    <filter string="Service Type" name="group_by_service_type" context="{'group_by': 'service_type'}"/>
                    <filter string="NAID Level" name="group_by_naid" context="{'group_by': 'naid_compliance_level'}"/>
                    <filter string="Status" name="group_by_state" context="{'group_by': 'status'}"/>
                    <filter string="Technician" name="group_by_technician" context="{'group_by': 'assigned_technician'}"/>
                    <filter string="Scheduled Date" name="group_by_date" context="{'group_by': 'scheduled_date:day'}"/>
                </group>
            </search>
        </field>
    </record>

    <!-- üöÄ ENTERPRISE ACTION - NAID AAA Certified Shredding -->
    <record id="action_shredding_service" model="ir.actions.act_window">
        <field name="name">üí• NAID Shredding Services</field>
        <field name="res_model">shredding.service</field>
        <field name="view_mode">kanban,list,form,calendar,graph</field>
        <field name="search_view_id" ref="view_shredding_service_search"/>
        <field name="context">{
            'search_default_naid_verified': 1,
            'search_default_this_month': 1
        }</field>
        <field name="help" type="html">
            <p class="o_view_nocontent_smiling_face">
                üí• Schedule your first NAID certified destruction service!
            </p>
            <p>
                <b>NAID AAA Certified Destruction Services:</b><br/>
                ‚Ä¢ üèÜ Full NAID AAA compliance and certification<br/>
                ‚Ä¢ üëÅÔ∏è Mandatory witness verification for security<br/>
                ‚Ä¢ üìú Automated certificate of destruction generation<br/>
                ‚Ä¢ üîó Complete chain of custody documentation<br/>
                ‚Ä¢ üì∑ Photo and video destruction verification<br/>
                ‚Ä¢ üõ°Ô∏è Multiple destruction methods (shred, pulp, incinerate)<br/>
                ‚Ä¢ üìã Comprehensive audit trails for compliance<br/>
                ‚Ä¢ üå± Environmental compliance tracking<br/>
                ‚Ä¢ üì± Mobile-optimized for field operations
            </p>
        </field>
    </record>
</odoo>
