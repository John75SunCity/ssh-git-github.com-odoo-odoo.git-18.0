<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>
    
        <record id="advanced_billing_profile_view_tree" model="ir.ui.view">
            <field name="name">advanced.billing.profile.view.tree</field>
            <field name="model">advanced.billing.profile</field>
            <field name="arch" type="xml">
                <list string="Billing Profiles">
                    <field name="name" />
                    <field name="partner_id" />
                    <field name="billing_frequency" />
                    <field name="state" />
                </list>
            </field>
        </record>
        <record id="advanced_billing_profile_view_form" model="ir.ui.view">
            <field name="name">advanced.billing.profile.view.form</field>
            <field name="model">advanced.billing.profile</field>
            <field name="arch" type="xml">
                <form string="Billing Profile">
                    <header>
                        <button name="action_activate" type="object" string="Activate" class="oe_highlight" invisible="state != 'draft'" />
                        <button name="action_suspend" type="object" string="Suspend" invisible="state != 'active'" />
                        <button name="action_close" type="object" string="Close" invisible="state not in ['active', 'suspended']" />
                        <field name="state" widget="statusbar" statusbar_visible="draft,active,closed" />
                    </header>
                    <sheet>
                        <group>
                            <group>
                                <field name="name" />
                                <field name="partner_id" />
                                <field name="primary_contact_id" />
                            </group>
                            <group>
                                <field name="active" />
                                <field name="company_id" groups="base.group_multi_company" />
                            </group>
                        </group>
                        <notebook>
                            <page string="Billing Configuration">
                                <group>
                                    <field name="billing_frequency" />
                                    <field name="billing_cycle_day" />
                                    <field name="auto_billing" />
                                    <field name="discount_percentage" />
                                    <field name="total_monthly_amount" />
                                </group>
                            </page>
                            <page string="Contacts">
                                <field name="contact_ids">
                                    <list>
                                        <field name="name" />
                                        <field name="email" />
                                        <field name="phone" />
                                    </list>
                                </field>
                            </page>
                            <page string="Services">
                                <field name="billing_line_ids">
                                    <list>
                                        <field name="name" />
                                        <field name="type" />
                                        <field name="amount" />
                                        <field name="quantity" />
                                    </list>
                                </field>
                            </page>
                        </notebook>
                    </sheet>
                </form>
            </field>
        </record>
        <record id="advanced_billing_profile_view_tree" model="ir.ui.view">
            <field name="name">advanced.billing.profile.view.tree</field>
            <field name="model">advanced.billing.profile</field>
            <field name="arch" type="xml">
                <list>
                    <field name="name" />
                    <field name="primary_contact_id" />
                </list>
            </field>
        </record>
        <record id="advanced_billing_profile_view_search" model="ir.ui.view">
            <field name="name">advanced.billing.profile.view.search</field>
            <field name="model">advanced.billing.profile</field>
            <field name="arch" type="xml">
                <search>
                    <field name="name" />
                </search>
            </field>
        </record>
        <record id="advanced_billing_profile_action" model="ir.actions.act_window">
            <!-- OPTIMIZATION: Model advanced.billing.profile has state field - consider using default search filters -->
            <field name="name">Billing Profiles</field>
            <field name="res_model">advanced.billing.profile</field>
            <field name="view_mode">list,form</field>
            <field name="view_id" ref="advanced_billing_profile_view_tree" />
            <field name="search_view_id" ref="advanced_billing_profile_view_search" />
            <field name="context">{'search_default_filter_active': 1}</field>
            <field name="help" type="html">
                <p class="o_view_nocontent_smiling_face">
                    <i class="fa fa-user-circle"/> No advanced billing profiles yet!
                </p>
                <p>
                    <b>‚ö†Ô∏è PREREQUISITES - Set up these first:</b><br/>
                    ‚Ä¢ <b>Base Rates:</b> Configuration ‚Üí Billing ‚Üí Base Rates<br/>
                    ‚Ä¢ <b>Billing Config:</b> Configuration ‚Üí Billing ‚Üí Billing Config<br/>
                    ‚Ä¢ <b>Customer:</b> Must have active Records Management customer
                </p>
                <p>
                    <b>üíº What are Advanced Billing Profiles?</b><br/>
                    Profiles allow you to create custom billing arrangements for specific customers with:<br/>
                    ‚Ä¢ Volume-based discounts (tiered pricing)<br/>
                    ‚Ä¢ Custom rate overrides (negotiated rates)<br/>
                    ‚Ä¢ Special billing terms (extended payment periods)<br/>
                    ‚Ä¢ Service bundles (combined service packages)<br/>
                    ‚Ä¢ Minimum monthly charges
                </p>
                <p>
                    <b>üìã To create an advanced billing profile:</b>
                </p>
                <ol>
                    <li>Click <b>New</b> button above</li>
                    <li>Enter <b>Profile Name</b> (e.g., "Enterprise Tier - XYZ Corp")</li>
                    <li>Select <b>Customer</b> (linked to billing config)</li>
                    <li>Choose <b>Profile Type</b>:
                        <ul>
                            <li><b>Tiered Pricing:</b> Different rates for volume brackets</li>
                            <li><b>Custom Rates:</b> Negotiated flat rates per service</li>
                            <li><b>Service Bundle:</b> Package of services at discount</li>
                            <li><b>Minimum Charge:</b> Minimum monthly billing amount</li>
                        </ul>
                    </li>
                    <li>Configure <b>Rate Tiers</b> (if tiered):
                        <ul>
                            <li>1-100 containers: $0.50/box</li>
                            <li>101-500 containers: $0.45/box</li>
                            <li>501+ containers: $0.40/box</li>
                        </ul>
                    </li>
                    <li>Set <b>Discount Percentage</b> (if applicable)</li>
                    <li>Add <b>Effective Date</b> and <b>Expiration Date</b> (optional)</li>
                    <li>Click <b>Activate</b> to apply profile</li>
                </ol>
                <p>
                    <b>üéØ Common Profile Examples:</b><br/>
                    ‚Ä¢ <b>High-Volume Discount:</b> 10% off for 500+ containers<br/>
                    ‚Ä¢ <b>Long-Term Contract:</b> 15% off for 3-year agreement<br/>
                    ‚Ä¢ <b>Bundle Package:</b> Storage + Retrieval + Destruction at 20% off<br/>
                    ‚Ä¢ <b>Minimum Monthly:</b> $500 minimum regardless of usage
                </p>
                <p>
                    <b>üí° Quick Tips:</b><br/>
                    ‚Ä¢ Profiles override base rates when active<br/>
                    ‚Ä¢ Use <b>Templates</b> to copy profiles to similar customers<br/>
                    ‚Ä¢ Set <b>Auto-Apply</b> to automatically use profile for all billing<br/>
                    ‚Ä¢ Track profile usage in <b>Billing Analytics</b> dashboard
                </p>
            </field>
        </record>
    
        <menuitem id="advanced_billing_profile_menu" name="Billing Profiles" parent="records_management.menu_records_billing" action="advanced_billing_profile_action" sequence="21" />
    
    
    </data>
</odoo>
