<?xml version="1.0" encoding="utf-8"?>
<odoo>

    <!-- Kanban view for KANBAN -->
    <record id="barcode_product_view_kanban" model="ir.ui.view">
        <field name="name">barcode.product.view.kanban</field>
        <field name="model">barcode.product</field>
        <field name="arch" type="xml">
            <kanban default_group_by="product_category" sample="1" quick_create="false" class="o_kanban_small_column">
                <field name="name"/>
                <field name="product_category"/>
                <field name="barcode_pattern"/>
                <field name="barcode_length"/>
                <field name="storage_rate"/>
                <field name="shred_rate"/>
                <field name="box_size"/>
                <field name="capacity"/>
                <field name="active"/>
                <field name="activity_ids"/>
                <field name="activity_state"/>
                <progressbar field="activity_state" colors='{"planned": "success", "today": "warning", "overdue": "danger"}'/>
                <templates>
                    <t t-name="card">
                        <div class="oe_kanban_global_click">
                            <div class="o_kanban_record_top">
                                <div class="o_kanban_record_headings">
                                    <strong class="o_kanban_record_title">
                                        <field name="name"/>
                                    </strong>
                                    <span class="float-end">
                                        <field name="active" widget="boolean_toggle"/>
                                    </span>
                                </div>
                                <span class="o_kanban_record_subtitle text-muted">
                                    <field name="product_category"/>
                                    |
                                    <field name="box_size"/>
                                </span>
                            </div>
                            <div class="o_kanban_record_body">
                                <div class="row">
                                    <div class="col-6">
                                        <strong>Barcode:</strong>
                                        <field name="barcode_pattern"/>
                                        <br/>
                                        <strong>Length:</strong>
                                        <field name="barcode_length"/>
                                        digits
                                    </div>
                                    <div class="col-6">
                                        <strong>Storage:</strong> $
                                        <field name="storage_rate"/>
                                        /month<br/>
                                        <strong>Shred:</strong> $
                                        <field name="shred_rate"/>
                                        /box
                                    </div>
                                </div>
                                <div class="mt-2">
                                    <span class="badge badge-info">
                                        <i class="fa fa-ruler"></i>
                                        <field name="capacity"/>
                                        cu.ft
                                    </span>
                                </div>
                                <div class="mt-2">
                                    <field name="activity_ids" widget="kanban_activity"/>
                                </div>
                            </div>
                            <div class="o_kanban_record_bottom">
                                <div class="oe_kanban_bottom_left">
                                    <span class="badge badge-pill badge-primary">
                                        <i class="fa fa-tag"></i> Pattern: <field name="barcode_pattern"/>
                                    </span>
                                </div>
                                <div class="oe_kanban_bottom_right">
                                    <field name="activity_state" widget="kanban_activity"/>
                                </div>
                            </div>
                        </div>
                    </t>
                </templates>
            </kanban>
        </field>
    </record>
    <!-- LIST VIEW: Barcode Product Management List -->
    <record id="barcode_product_view_tree" model="ir.ui.view">
        <field name="name">barcode.product.view.tree</field>
        <field name="model">barcode.product</field>
        <field name="arch" type="xml">
            <tree string="Barcode Product Management" decoration-success="active==True" decoration-muted="active==False" multi_edit="1" sample="1">
                <header>
                    <button name="action_activate" type="object" string="Activate"/>
                    <button name="action_deactivate" type="object" string="Deactivate"/>
                    <button name="action_update_pricing" type="object" string="Update Pricing"/>
                    <button name="action_generate_barcodes" type="object" string="Generate Barcodes"/>
                </header>
                <field name="name" string="Product Name"/>
                <field name="product_category" string="Category"/>
                <field name="box_size" string="Box Size"/>
                <field name="barcode_pattern" string="Barcode Pattern"/>
                <field name="barcode_length" string="Length"/>
                <field name="storage_rate" string="Storage Rate" widget="monetary"/>
                <field name="shred_rate" string="Shred Rate" widget="monetary"/>
                <field name="capacity" string="Capacity (cu.ft)" widget="float"/>
                <field name="monthly_volume" string="Monthly Volume" sum="Total Volume"/>
                <field name="active" string="Active" widget="boolean_toggle"/>
                <field name="activity_exception_decoration" widget="activity_exception"/>
            </tree>
        </field>
    </record>
    <!-- FORM VIEW: Detailed Barcode Product Configuration -->
    <record id="barcode_product_view_form" model="ir.ui.view">
        <field name="name">barcode.product.view.form</field>
        <field name="model">barcode.product</field>
        <field name="arch" type="xml">
            <form string="Barcode Product Configuration">
                <header>
                    <!-- Converted states="active=False" to invisible condition (show only when inactive) -->
                    <button name="action_activate" string="Activate" type="object" class="btn-primary" invisible="active != False"/>
                    <!-- Converted states="active=True" to invisible condition (show only when active) -->
                    <button name="action_deactivate" string="Deactivate" type="object" class="btn-warning" invisible="active != True"/>
                    <button name="action_generate_barcodes" string="Generate Barcodes" type="object" class="btn-success"/>
                    <button name="action_update_pricing" string="Update Pricing" type="object" class="btn-info"/>
                    <field name="active" widget="statusbar" statusbar_visible="False,True" options="{'clickable': '1'}"/>
                </header>
                <sheet>
                    <div class="oe_button_box" name="button_box">
                        <button name="action_view_storage_boxes" type="object" class="oe_stat_button" icon="fa-archive">
                            <div class="o_field_widget o_stat_info">
                                <span class="o_stat_value">
                                    <!-- Removed storage_box_count: field not defined on model -->
                                </span>
                                <span class="o_stat_text">Storage Boxes</span>
                            </div>
                        </button>
                        <button name="action_view_shred_bins" type="object" class="oe_stat_button" icon="fa-trash">
                            <div class="o_field_widget o_stat_info">
                                <span class="o_stat_value">
                                    <!-- Removed shred_bin_count: field not defined on model -->
                                </span>
                                <span class="o_stat_text">Shred Bins</span>
                            </div>
                        </button>
                        <button name="action_view_revenue" type="object" class="oe_stat_button" icon="fa-dollar">
                            <div class="o_field_widget o_stat_info">
                                <span class="o_stat_value">
                                    <!-- Removed monthly_revenue: field not defined on model -->
                                </span>
                                <span class="o_stat_text">Monthly Revenue</span>
                            </div>
                        </button>
                    </div>
                    <div class="oe_title">
                        <h1>
                            <field name="name" placeholder="Product Name (e.g., Standard Storage Box)"/>
                        </h1>
                        <div class="o_row">
                            <field name="product_category" placeholder="Storage Box / Shred Bin"/>
                            <label for="box_size" string="Size:"/>
                            <field name="box_size" placeholder="Box Dimensions"/>
                        </div>
                    </div>
                    <group>
                        <group name="product_details" string="Product Details">
                            <field name="product_code"/>
                            <field name="capacity" widget="float"/>
                            <field name="dimensions"/>
                            <field name="weight_limit" widget="float"/>
                            <field name="material_type"/>
                            <field name="color"/>
                        </group>
                        <group name="barcode_config" string="Barcode Configuration">
                            <field name="barcode_pattern" required="1"/>
                            <field name="barcode_length" required="1"/>
                            <field name="barcode_prefix"/>
                            <field name="barcode_suffix"/>
                            <field name="check_digit_required" widget="boolean_toggle"/>
                            <field name="auto_generate" widget="boolean_toggle"/>
                        </group>
                    </group>
                    <group>
                        <group name="pricing" string="Pricing Configuration">
                            <field name="storage_rate" widget="monetary"/>
                            <field name="shred_rate" widget="monetary"/>
                            <field name="setup_fee" widget="monetary"/>
                            <field name="rush_service_rate" widget="monetary"/>
                            <field name="volume_discount_threshold"/>
                            <field name="volume_discount_rate" widget="percentage"/>
                        </group>
                        <group name="analytics" string="Analytics">
                            <field name="monthly_volume"/>
                            <field name="monthly_revenue" widget="monetary"/>
                            <field name="average_storage_duration" widget="float"/>
                            <field name="utilization_rate" widget="percentage"/>
                            <field name="profit_margin" widget="percentage"/>
                        </group>
                    </group>
                    <notebook>
                        <!-- Converted states="product_category=='storage_box'" to invisible condition -->
                        <page string="Container Configuration" name="storage_config" invisible="product_category != 'container_box'">
                            <group>
                                <group string="Storage Specifications">
                                    <field name="climate_controlled" widget="boolean_toggle"/>
                                    <field name="fireproof_rating"/>
                                    <field name="security_level"/>
                                    <field name="stackable" widget="boolean_toggle"/>
                                    <field name="max_stack_height"/>
                                </group>
                                <group string="Document Types">
                                    <field name="suitable_document_types" widget="many2many_tags"/>
                                    <field name="max_file_folders"/>
                                    <field name="recommended_retention_years"/>
                                    <field name="access_frequency"/>
                                </group>
                            </group>
                            <separator string="Storage Box Assignment"/>
                            <group>
                                <field name="container_ids" string="Assigned Container"/>
                            </group>
                        </page>
                        <!-- Converted states="product_category=='shred_bin'" to invisible condition -->
                        <page string="Shred Bin Configuration" name="shred_config" invisible="product_category != 'shred_bin'">
                            <group>
                                <group string="Shredding Specifications">
                                    <field name="shred_security_level"/>
                                    <field name="naid_compliant" widget="boolean_toggle"/>
                                    <field name="witness_destruction" widget="boolean_toggle"/>
                                    <field name="certificate_provided" widget="boolean_toggle"/>
                                    <field name="pickup_frequency"/>
                                </group>
                                <group string="Bin Specifications">
                                    <field name="bin_volume" widget="float"/>
                                    <field name="lockable" widget="boolean_toggle"/>
                                    <field name="mobile" widget="boolean_toggle"/>
                                    <field name="indoor_outdoor"/>
                                    <field name="weight_capacity" widget="float"/>
                                </group>
                            </group>
                            <separator string="Shred Bin Inventory"/>
                            <!-- Removed shred_bin_ids list: relation field not implemented on barcode.product -->
                        </page>
                        <page string="Pricing Rules" name="pricing_rules">
                            <separator string="Pricing Tier Configuration"/>
                            <!-- Removed pricing_tier_ids list: relation field not implemented on barcode.product -->
                            <separator string="Seasonal Pricing"/>
                            <!-- Removed seasonal_pricing_ids list: relation field not implemented on barcode.product -->
                        </page>
                        <page string="Barcode Generation" name="barcode_generation">
                            <group>
                                <group string="Generation Settings">
                                    <field name="next_sequence_number"/>
                                    <field name="last_generated_barcode"/>
                                    <field name="total_generated"/>
                                    <field name="generation_batch_size"/>
                                </group>
                                <group string="Validation Rules">
                                    <field name="validate_format" widget="boolean_toggle"/>
                                    <field name="validate_uniqueness" widget="boolean_toggle"/>
                                    <field name="validate_check_digit" widget="boolean_toggle"/>
                                    <field name="allowed_characters"/>
                                </group>
                            </group>
                            <separator string="Generation History"/>
                            <!-- Removed generation_history_ids list: inverse relation not defined on barcode.product (history references product via product_id) -->
                        </page>
                    </notebook>
                </sheet>
                <div class="oe_chatter">
                    <field name="message_follower_ids"/>
                    <field name="activity_ids"/>
                    <field name="message_ids"/>
                </div>
            </form>
        </field>
    </record>
    <!-- SEARCH VIEW: Advanced Barcode Product Search -->
    <record id="barcode_product_view_search" model="ir.ui.view">
        <field name="name">barcode.product.view.search</field>
        <field name="model">barcode.product</field>
        <field name="arch" type="xml">
            <search string="Search Barcode Products">
                <field name="name" string="Product Name" filter_domain="[('name', 'ilike', self)]"/>
                <field name="product_category" string="Category"/>
                <field name="barcode_pattern" string="Barcode Pattern"/>
                <field name="box_size" string="Box Size"/>
                <filter string="Active Products" name="active" domain="[('active', '=', True)]"/>
                <filter string="Inactive Products" name="inactive" domain="[('active', '=', False)]"/>
                <separator/>
                <filter string="Storage Boxes" name="storage_boxes" domain="[('product_category', '=', 'storage_box')]"/>
                <filter string="Shred Bins" name="shred_bins" domain="[('product_category', '=', 'shred_bin')]"/>
                <separator/>
                <filter string="High Volume" name="high_volume" domain="[('monthly_volume', '&gt;', 100)]"/>
                <filter string="Premium Pricing" name="premium" domain="[('storage_rate', '&gt;', 50)]"/>
                <filter string="NAID Compliant" name="naid_compliant" domain="[('naid_compliant', '=', True)]"/>
                <group expand="0" string="Group By">
                    <filter string="Category" name="group_category" context="{'group_by': 'product_category'}"/>
                    <filter string="Box Size" name="group_size" context="{'group_by': 'box_size'}"/>
                    <filter string="Barcode Length" name="group_length" context="{'group_by': 'barcode_length'}"/>
                    <filter string="Active Status" name="group_active" context="{'group_by': 'active'}"/>
                </group>
            </search>
        </field>
    </record>
    <!-- GRAPH VIEW: Barcode Product Analytics -->
    <record id="barcode_product_view_graph" model="ir.ui.view">
        <field name="name">barcode.product.view.graph</field>
        <field name="model">barcode.product</field>
        <field name="arch" type="xml">
            <graph string="Product Analytics" type="bar" sample="1">
                <field name="product_category" type="row"/>
                <field name="box_size" type="col"/>
                <field name="monthly_volume" type="measure"/>
            </graph>
        </field>
    </record>
    <!-- PIVOT VIEW: Barcode Product Analysis -->
    <record id="barcode_product_view_pivot" model="ir.ui.view">
        <field name="name">barcode.product.view.pivot</field>
        <field name="model">barcode.product</field>
        <field name="arch" type="xml">
            <pivot string="Product Analysis" sample="1">
                <field name="product_category" type="row"/>
                <field name="box_size" type="col"/>
                <field name="monthly_revenue" type="measure"/>
                <field name="utilization_rate" type="measure"/>
            </pivot>
        </field>
    </record>
    <!-- ACTION: Barcode Product Management -->
    <record id="action_barcode_product" model="ir.actions.act_window">
        <field name="name"><i class='fa fa-box'></i> Barcode Product Management</field>
        <field name="res_model">barcode.product</field>
        <field name="view_mode">kanban,list,form,graph,pivot</field>
        <field name="search_view_id" ref="barcode_product_view_search"/>
        <field name="context">{
            'search_default_active': 1,
            'search_default_storage_boxes': 1
        }</field>
        <field name="help" type="html">
            <p class="o_view_nocontent_smiling_face">
                <i class='fa fa-box'></i> Create your first barcode product configuration!
            </p>
            <p>
                Configure barcode patterns and pricing for storage box types and shred bin sizes.
                Manage product categories, pricing tiers, and automated barcode generation for efficient inventory tracking.
            </p>
            <p>
                <strong>Key Features:</strong>
                <br/>
                • Storage box and shred bin barcode configuration<br/>
                • Automated pricing based on box size and capacity<br/>
                • Barcode pattern generation and validation<br/>
                • Volume-based pricing tiers and discounts<br/>
                • NAID compliance tracking for shred services<br/>
                • Revenue analytics and utilization reporting
            </p>
        </field>
    </record>

</odoo>
