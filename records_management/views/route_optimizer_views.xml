<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>
<!-- List view for route.optimizer -->
    <record id="route_optimizer_view_tree" model="ir.ui.view">
        <field name="name">route.optimizer.view.tree</field>
        <field name="model">route.optimizer</field>
        <field name="arch" type="xml">
        <list>
        <field name="name"/>
        </list>
    </field>
    </record>

<!-- Form view for route.optimizer -->
    <record id="route_optimizer_view_form" model="ir.ui.view">
        <field name="name">route.optimizer.view.form</field>
        <field name="model">route.optimizer</field>
        <field name="arch" type="xml">
        <form string="Route.Optimizer">
            <sheet>
                <div class="oe_title">
                    <label for="name"/>
                    <h1>
        <field name="name" placeholder="Name..."/>
                    </h1>
                </div>
            </sheet>
        </form>
    </field>
    </record>

<!-- Search view for route.optimizer -->
    <record id="route_optimizer_view_search" model="ir.ui.view">
        <field name="name">route.optimizer.view.search</field>
        <field name="model">route.optimizer</field>
        <field name="arch" type="xml">
        <search>
            <group expand="1" string="Group By">
                <filter string="Name" name="name" domain="[]" context="{'group_by':'name'}"/>
            </group>
        </search>
    </field>
    </record>

<!-- Action for route.optimizer -->
    <record id="action_route_optimizer" model="ir.actions.act_window">
        <field name="name">Route Optimizer</field>
        <field name="res_model">route.optimizer</field>
        <field name="view_mode">list,form</field>
        <field name="domain">[]</field>
        <field name="context">{}</field>
        <field name="help" type="html">
            <p class="o_view_nocontent_smiling_face">
                <i class="fa fa-map-signs"/> No route optimizations yet!
            </p>
            <p>
                <b>‚ö†Ô∏è Prerequisites:</b>
            </p>
            <ul>
                <li>‚úì <b>Pickup Routes Created</b> - Go to: <i>Records Management &gt; Operations &gt; Pickup Routes</i></li>
                <li>‚úì <b>Multiple Stops Assigned</b> - Add at least 3+ pickup requests to a route</li>
                <li>‚úì <b>Customer Addresses Geocoded</b> - Ensure GPS coordinates available for all stops</li>
            </ul>
            <p>
                <b>üìã To optimize a route:</b>
            </p>
            <ol>
                <li>Open a <b>Pickup Route</b> in Draft or Planned state</li>
                <li>Click <b>Optimize Route</b> button (or access from this menu)</li>
                <li>System analyzes all stops using AI routing algorithm</li>
                <li>Review <b>Before/After Comparison</b>:
                    <ul>
                        <li>Original sequence vs optimized sequence</li>
                        <li>Total distance reduction (miles/km)</li>
                        <li>Estimated time savings (minutes)</li>
                        <li>Fuel cost savings ($)</li>
                    </ul>
                </li>
                <li>Review <b>Optimized Stop Sequence</b> with updated numbers</li>
                <li>Check for <b>time window conflicts</b> (highlighted in red if any)</li>
                <li>Click <b>Apply Optimization</b> to update route stop sequences</li>
                <li>System auto-updates <b>Planned Start/End Times</b> for each stop</li>
                <li>Route ready for driver confirmation and execution</li>
            </ol>
            <p>
                <b>üöÄ Key Features:</b><br/>
                ‚Ä¢ <b>AI Routing Algorithm:</b> Uses traveling salesman problem (TSP) solver for optimal stop order<br/>
                ‚Ä¢ <b>Time Window Respect:</b> Guarantees customer-specified pickup windows are maintained<br/>
                ‚Ä¢ <b>Distance Minimization:</b> Reduces total drive distance by 15-30% on average vs manual planning<br/>
                ‚Ä¢ <b>Fuel Cost Calculation:</b> Estimates fuel savings based on vehicle MPG and current gas prices<br/>
                ‚Ä¢ <b>Multi-Vehicle Support:</b> Can optimize multiple routes simultaneously for fleet efficiency<br/>
                ‚Ä¢ <b>Real-Time Traffic:</b> Optional integration with traffic APIs for time-of-day optimization<br/>
                ‚Ä¢ <b>Geographic Clustering:</b> Auto-groups nearby stops to minimize backtracking<br/>
                ‚Ä¢ <b>Performance Metrics:</b> Tracks optimization success rate, avg time savings, ROI analytics<br/>
            </p>
            <p>
                <b>üí° Pro Tips:</b><br/>
                ‚Ä¢ Run optimizer <b>before confirming route</b> - can\'t optimize once driver starts execution<br/>
                ‚Ä¢ Typical savings: <b>20-30 minutes</b> drive time + <b>15-25%</b> fuel reduction per route<br/>
                ‚Ä¢ For routes with <b>tight time windows</b>, optimizer prioritizes schedule over pure distance<br/>
                ‚Ä¢ Review optimization history to identify <b>frequently inefficient manual routes</b><br/>
                ‚Ä¢ Use <b>saved optimization templates</b> for recurring weekly/monthly route patterns<br/>
            </p>
        </field>
    </record>
    </data>
</odoo>
