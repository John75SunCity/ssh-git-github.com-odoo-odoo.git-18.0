<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <!-- üè∑Ô∏è ENTERPRISE RECORD TAGS - Smart Classification System -->
    
    <!-- üé® Records Tag Kanban Dashboard -->
    <record id="view_records_tag_kanban" model="ir.ui.view">
        <field name="name">records.tag.kanban</field>
        <field name="model">records.tag</field>
        <field name="arch" type="xml">
            <kanban default_group_by="category" class="o_kanban_tag_dashboard">
                <field name="name"/>
                <field name="category"/>
                <field name="color"/>
                <field name="active"/>
                <field name="tag_usage_count"/>
                <field name="auto_assign"/>
                <templates>
                    <t t-name="kanban-box">
                        <div class="oe_kanban_card oe_kanban_global_click">
                            <div class="o_kanban_card_header">
                                <div class="o_kanban_card_header_title">
                                    <div class="o_primary">
                                        <strong>üè∑Ô∏è <field name="name"/></strong>
                                    </div>
                                    <div class="o_secondary">
                                        üìÇ <field name="category"/>
                                    </div>
                                </div>
                                <div class="o_kanban_manage_button_section">
                                    <a class="o_kanban_manage_toggle_button" href="#"><i class="fa fa-ellipsis-v"/></a>
                                </div>
                            </div>
                            <div class="o_kanban_card_content">
                                <div class="row">
                                    <div class="col-8">
                                        <div><i class="fa fa-tag"/> Color: <span t-att-style="'color: ' + record.color.raw_value">‚óè</span> <field name="color"/></div>
                                        <div><i class="fa fa-bar-chart"/> Usage: <field name="tag_usage_count"/> records</div>
                                    </div>
                                    <div class="col-4">
                                        <span class="badge badge-success" t-if="record.auto_assign.raw_value">
                                            ü§ñ Auto
                                        </span>
                                        <span class="badge" t-att-class="record.active.raw_value ? 'badge-primary' : 'badge-secondary'">
                                            <t t-if="record.active.raw_value">üü¢ Active</t>
                                            <t t-else="">‚≠ï Inactive</t>
                                        </span>
                                    </div>
                                </div>
                                <div class="row mt-2">
                                    <div class="col-6">
                                        <button class="btn btn-primary btn-sm" type="object" name="action_view_tagged_records">
                                            üìÑ Records
                                        </button>
                                    </div>
                                    <div class="col-6">
                                        <button class="btn btn-success btn-sm" type="object" name="action_bulk_tag">
                                            üè∑Ô∏è Bulk Tag
                                        </button>
                                    </div>
                                </div>
                            </div>
                            <div class="o_kanban_card_manage_pane dropdown-menu" role="menu">
                                <a role="menuitem" type="edit" class="dropdown-item">‚úèÔ∏è Edit Tag</a>
                                <a role="menuitem" type="object" name="action_view_tagged_records" class="dropdown-item">üìÑ View Records</a>
                                <a role="menuitem" type="object" name="action_configure_rules" class="dropdown-item">‚öôÔ∏è Configure Rules</a>
                                <a role="menuitem" type="object" name="action_analytics" class="dropdown-item">üìä Analytics</a>
                                <div class="dropdown-divider"/>
                                <a role="menuitem" type="object" name="action_duplicate" class="dropdown-item">üìã Duplicate</a>
                            </div>
                        </div>
                    </t>
                </templates>
            </kanban>
        </field>
    </record>

    <!-- üìã Enhanced Tree with Smart Analytics -->
    <record id="view_records_tag_tree" model="ir.ui.view">
        <field name="name">records.tag.tree</field>
        <field name="model">records.tag</field>
        <field name="arch" type="xml">
            <tree decoration-success="active == True and auto_assign == True" 
                  decoration-warning="tag_usage_count == 0"
                  decoration-info="category == 'system'">
                <field name="name" string="üè∑Ô∏è Tag Name"/>
                <field name="category" string="üìÇ Category"/>
                <field name="color" string="üé® Color" widget="color"/>
                <field name="description" string="üìù Description"/>
                <field name="tag_usage_count" string="üìä Usage Count"/>
                <field name="auto_assign" string="ü§ñ Auto Assign" widget="boolean_toggle"/>
                <field name="active" string="üéØ Status" widget="boolean_toggle"/>
                <field name="last_used_date" string="üìÖ Last Used"/>
                <button name="action_view_tagged_records" type="object" string="Records" 
                        icon="fa-file-text" class="btn-link"/>
                <button name="action_bulk_tag" type="object" string="Bulk Tag" 
                        icon="fa-tags" class="btn-link"/>
            </tree>
        </field>
    </record>

    <!-- üìù Enhanced Form with Complete Tag Management -->
    <record id="view_records_tag_form" model="ir.ui.view">
        <field name="name">records.tag.form</field>
        <field name="model">records.tag</field>
        <field name="arch" type="xml">
            <form>
                <header>
                    <button name="action_view_tagged_records" type="object" string="üìÑ View Tagged Records" class="btn-primary"/>
                    <button name="action_bulk_tag" type="object" string="üè∑Ô∏è Bulk Tag Records" class="btn-secondary"/>
                    <button name="action_configure_rules" type="object" string="‚öôÔ∏è Configure Auto Rules" class="btn-info"/>
                    <button name="action_analytics" type="object" string="üìä Tag Analytics" class="btn-success"/>
                    <field name="active" widget="boolean_button" options="{'terminology': {'string_true': 'üü¢ Active', 'string_false': '‚≠ï Archived'}}"/>
                </header>
                <sheet>
                    <div class="oe_button_box" name="button_box">
                        <button class="oe_stat_button" type="object" name="action_view_tagged_records" icon="fa-file-text">
                            <field string="Tagged Records" name="tag_usage_count" widget="statinfo"/>
                        </button>
                        <button class="oe_stat_button" type="object" name="action_view_auto_rules" icon="fa-cogs">
                            <field string="Auto Rules" name="auto_rule_count" widget="statinfo"/>
                        </button>
                        <button class="oe_stat_button" type="object" name="action_view_related_tags" icon="fa-tags">
                            <field string="Related Tags" name="related_tag_count" widget="statinfo"/>
                        </button>
                        <button class="oe_stat_button" icon="fa-trending-up" 
                                attrs="{'invisible': [('tag_usage_count', '=', 0)]}">
                            <div class="o_field_widget o_stat_info">
                                <span class="o_stat_value">üìà</span>
                                <span class="o_stat_text">Trending</span>
                            </div>
                        </button>
                    </div>
                    
                    <group>
                        <group string="üè∑Ô∏è Tag Definition">
                            <field name="name" placeholder="e.g., Financial Records"/>
                            <field name="category"/>
                            <field name="description"/>
                            <field name="color" widget="color"/>
                        </group>
                        <group string="ü§ñ Automation Settings">
                            <field name="auto_assign"/>
                            <field name="priority"/>
                            <field name="applies_to_documents"/>
                            <field name="applies_to_boxes"/>
                        </group>
                    </group>
                    
                    <group>
                        <group string="üìä Usage Analytics">
                            <field name="tag_usage_count" readonly="1"/>
                            <field name="last_used_date" readonly="1"/>
                            <field name="popularity_score" readonly="1"/>
                            <field name="trend_direction" readonly="1"/>
                        </group>
                        <group string="üîó Relationships">
                            <field name="parent_tag_id"/>
                            <field name="is_system_tag"/>
                            <field name="exclude_from_search"/>
                            <field name="requires_approval"/>
                        </group>
                    </group>
                    
                    <notebook>
                        <page string="‚öôÔ∏è Auto-Assignment Rules" name="auto_rules">
                            <field name="auto_assignment_rule_ids" mode="tree">
                                <tree editable="bottom">
                                    <field name="rule_name"/>
                                    <field name="rule_type"/>
                                    <field name="field_name"/>
                                    <field name="operator"/>
                                    <field name="value"/>
                                    <field name="confidence_threshold"/>
                                    <field name="active"/>
                                </tree>
                            </field>
                        </page>
                        <page string="üè∑Ô∏è Related Tags" name="related_tags">
                            <field name="related_tag_ids" mode="tree">
                                <tree>
                                    <field name="name"/>
                                    <field name="category"/>
                                    <field name="relationship_type"/>
                                    <field name="strength"/>
                                    <field name="mutual_exclusion"/>
                                    <button name="action_view_tag" type="object" string="View" icon="fa-eye" class="btn-link"/>
                                </tree>
                            </field>
                        </page>
                        <page string="üìÑ Tagged Records" name="tagged_records">
                            <field name="tagged_record_ids" mode="tree">
                                <tree>
                                    <field name="record_type"/>
                                    <field name="record_name"/>
                                    <field name="tagged_date"/>
                                    <field name="tagged_by"/>
                                    <field name="auto_tagged"/>
                                    <field name="confidence_score"/>
                                    <button name="action_view_record" type="object" string="View" icon="fa-eye" class="btn-link"/>
                                </tree>
                            </field>
                        </page>
                        <page string="üìù Tag History" name="history">
                            <field name="tag_history_ids" mode="tree">
                                <tree>
                                    <field name="timestamp"/>
                                    <field name="action"/>
                                    <field name="user_id"/>
                                    <field name="record_affected"/>
                                    <field name="old_value"/>
                                    <field name="new_value"/>
                                    <field name="notes"/>
                                </tree>
                            </field>
                        </page>
                        <page string="üìä Analytics Dashboard" name="analytics">
                            <group>
                                <group string="üìà Usage Statistics">
                                    <field name="total_usage_this_month" readonly="1"/>
                                    <field name="usage_growth_rate" readonly="1"/>
                                    <field name="peak_usage_date" readonly="1"/>
                                    <field name="average_daily_usage" readonly="1"/>
                                </group>
                                <group string="üéØ Performance Metrics">
                                    <field name="auto_assignment_accuracy" readonly="1"/>
                                    <field name="user_satisfaction_score" readonly="1"/>
                                    <field name="search_frequency" readonly="1"/>
                                    <field name="tag_effectiveness_score" readonly="1"/>
                                </group>
                            </group>
                            <field name="usage_analytics_ids" mode="tree">
                                <tree>
                                    <field name="measurement_date"/>
                                    <field name="metric_type"/>
                                    <field name="value"/>
                                    <field name="period"/>
                                    <field name="comparison_value"/>
                                    <field name="trend"/>
                                </tree>
                            </field>
                        </page>
                        <page string="‚öôÔ∏è Advanced Settings" name="advanced">
                            <group>
                                <group string="üîç Search &amp; Discovery">
                                    <field name="search_weight"/>
                                    <field name="boost_factor"/>
                                    <field name="searchable"/>
                                    <field name="suggest_in_autocomplete"/>
                                </group>
                                <group string="üé® Display Settings">
                                    <field name="icon"/>
                                    <field name="display_order"/>
                                    <field name="group_with_similar"/>
                                    <field name="show_in_filters"/>
                                </group>
                            </group>
                            <group>
                                <group string="üîê Security &amp; Permissions">
                                    <field name="restricted_access"/>
                                    <field name="allowed_user_groups"/>
                                    <field name="audit_trail_enabled"/>
                                    <field name="data_retention_period"/>
                                </group>
                                <group string="üåê Integration">
                                    <field name="external_system_sync"/>
                                    <field name="api_accessible"/>
                                    <field name="webhook_enabled"/>
                                    <field name="export_allowed"/>
                                </group>
                            </group>
                        </page>
                    </notebook>
                </sheet>
                <div class="oe_chatter">
                    <field name="message_follower_ids"/>
                    <field name="activity_ids"/>
                    <field name="message_ids"/>
                </div>
            </form>
        </field>
    </record>

    <!-- üîç Enhanced Search with Smart Filters -->
    <record id="view_records_tag_search" model="ir.ui.view">
        <field name="name">records.tag.search</field>
        <field name="model">records.tag</field>
        <field name="arch" type="xml">
            <search>
                <field name="name" string="Tag"/>
                <field name="category"/>
                <field name="description"/>
                <field name="color"/>
                
                <filter string="üü¢ Active" name="active" domain="[('active', '=', True)]"/>
                <filter string="‚≠ï Archived" name="archived" domain="[('active', '=', False)]"/>
                
                <separator/>
                <filter string="ü§ñ Auto Assign" name="auto_assign" domain="[('auto_assign', '=', True)]"/>
                <filter string="üè∑Ô∏è Manual Only" name="manual_only" domain="[('auto_assign', '=', False)]"/>
                <filter string="üîí System Tags" name="system_tags" domain="[('is_system_tag', '=', True)]"/>
                
                <separator/>
                <filter string="üìà Frequently Used" name="frequently_used" domain="[('tag_usage_count', '&gt;', 10)]"/>
                <filter string="üìä Trending" name="trending" domain="[('trend_direction', '=', 'up')]"/>
                <filter string="üí§ Unused" name="unused" domain="[('tag_usage_count', '=', 0)]"/>
                
                <separator/>
                <filter string="üìÑ Document Tags" name="document_tags" domain="[('applies_to_documents', '=', True)]"/>
                <filter string="üì¶ Box Tags" name="box_tags" domain="[('applies_to_boxes', '=', True)]"/>
                <filter string="üîç Searchable" name="searchable" domain="[('searchable', '=', True)]"/>
                
                <group expand="0" string="üìä Group By">
                    <filter string="Category" name="group_by_category" context="{'group_by': 'category'}"/>
                    <filter string="Color" name="group_by_color" context="{'group_by': 'color'}"/>
                    <filter string="Auto Assign" name="group_by_auto" context="{'group_by': 'auto_assign'}"/>
                    <filter string="Usage Count" name="group_by_usage" context="{'group_by': 'tag_usage_count'}"/>
                    <filter string="Last Used" name="group_by_last_used" context="{'group_by': 'last_used_date:month'}"/>
                </group>
            </search>
        </field>
    </record>

    <!-- üöÄ ENTERPRISE ACTION - Records Tag Management -->
    <record id="action_records_tag_simple" model="ir.actions.act_window">
        <field name="name">üè∑Ô∏è Records Tags</field>
        <field name="res_model">records.tag</field>
        <field name="view_mode">kanban,tree,form</field>
        <field name="search_view_id" ref="view_records_tag_search"/>
        <field name="context">{
            'search_default_active': 1
        }</field>
        <field name="help" type="html">
            <p class="o_view_nocontent_smiling_face">
                üè∑Ô∏è Create your first smart tag classification!
            </p>
            <p>
                <b>Enterprise Tag Management System:</b><br/>
                ‚Ä¢ ü§ñ AI-powered auto-assignment rules<br/>
                ‚Ä¢ üé® Visual color-coded organization<br/>
                ‚Ä¢ üìä Advanced usage analytics and trending<br/>
                ‚Ä¢ üîó Smart tag relationships and hierarchies<br/>
                ‚Ä¢ üîç Enhanced search and discovery features<br/>
                ‚Ä¢ üì± Bulk tagging and mass operations<br/>
                ‚Ä¢ üè∑Ô∏è Multi-category classification system<br/>
                ‚Ä¢ üìà Performance metrics and optimization<br/>
                ‚Ä¢ üîê Security controls and access management
            </p>
        </field>
    </record>
</odoo>
