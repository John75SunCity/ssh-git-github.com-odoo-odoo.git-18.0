<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>
        <record id="service_item_view_kanban" model="ir.ui.view">
            <field name="name">service.item.view.kanban</field>
            <field name="model">service.item</field>
            <field name="arch" type="xml">
                <kanban default_group_by="category" class="o_kanban_service_items">
                    <field name="name" />
                    <field name="category" />
                    <field name="purchase_cost" />
                    <field name="currency_id" />
                    <field name="active" />
                    <field name="activity_state" />
                    <templates>
                        <t t-name="card">
                            <div class="oe_kanban_card oe_kanban_global_click">
                                <div class="o_kanban_card_header">
                                    <div class="o_kanban_card_header_title">
                                        <div class="o_primary">
                                            <strong>
                                                <field name="name" />
                                            </strong>
                                        </div>
                                        <div class="o_secondary">
                                            <field name="category" />
                                        </div>
                                    </div>
                                    <div class="o_kanban_manage_button_section">
                                        <a class="o_kanban_manage_toggle_button" href="#">
                                            <i class="fa fa-ellipsis-v" role="img" aria-label="Manage" title="Manage" />
                                        </a>
                                    </div>
                                </div>
                                <div class="o_kanban_card_content" t-att-title="record.display_name.raw_value" t-att-aria-label="record.display_name.raw_value" role="group">
                                    <div class="row">
                                        <div class="col-6">
                                            <strong>Price: </strong>
                                            <field name="purchase_cost" widget="monetary" options="{'currency_field': 'currency_id'}" />
                                        </div>
                                        <div class="col-6">
                                            <field name="active" widget="boolean_toggle" />
                                        </div>
                                    </div>
                                </div>
                                <div class="o_kanban_card_manage_pane dropdown-menu" role="menu">
                                    <a t-if="widget.editable" type="edit" role="menuitem" class="dropdown-item">Edit</a>
                                    <a t-if="widget.deletable" type="delete" role="menuitem" class="dropdown-item">Delete</a>
                                </div>
                            </div>
                        </t>
                    </templates>
                </kanban>
            </field>
        </record>
        <record id="service_item_view_tree" model="ir.ui.view">
            <field name="name">service.item.view.tree</field>
            <field name="model">service.item</field>
            <field name="arch" type="xml">
                <list string="Service Items" decoration-muted="not active">
                    <field name="name" />
                    <field name="category" />
                    <field name="service_type" />
                    <field name="purchase_cost" widget="monetary" options="{'currency_field': 'currency_id'}" />
                    <!-- Removed always-invisible 'currency_id' column; amounts display with currency symbol separately -->
                    <field name="state" />
                    <field name="active" widget="boolean_toggle" />
                    <field name="activity_ids" widget="list_activity" />
                    <!-- Removed always-hidden company_id column (column_invisible). Multi-company usage handled in form if needed. -->
                </list>
            </field>
        </record>
        <record id="service_item_view_form" model="ir.ui.view">
            <field name="name">service.item.view.form</field>
            <field name="model">service.item</field>
            <field name="arch" type="xml">
                <form string="Service Item">
                    <header>
                        <button name="action_activate" string="Activate" type="object" class="btn-success" invisible="active == True" />
                        <button name="action_deactivate" string="Deactivate" type="object" class="btn-warning" invisible="active == False" />
                        <button name="action_duplicate_service" string="Duplicate" type="object" class="btn-secondary" />
                    </header>
                    <sheet>
                        <div class="oe_button_box" name="button_box">
                            <button class="oe_stat_button" type="object" name="action_view_related_requests" icon="fa-tasks">
                                <field name="service_request_count" string="Requests" widget="statinfo" />
                            </button>
                            <button class="oe_stat_button" type="object" name="action_view_pricing_history" icon="fa-line-chart">
                                <div class="o_field_widget o_stat_info">
                                    <span class="o_stat_text">Pricing</span>
                                    <span class="o_stat_text">History</span>
                                </div>
                            </button>
                        </div>
                        <widget name="web_ribbon" title="Inactive" bg_color="bg-danger" invisible="active == True" />
                        <div class="oe_title">
                            <label for="name" class="oe_edit_only" />
                            <h1>
                                <field name="name" placeholder="e.g., Document Shredding, Secure Storage, Pickup Service" />
                            </h1>
                            <div class="o_row">
                                <field name="active" widget="boolean_toggle" />
                                <label for="active" />
                            </div>
                        </div>
                        <group>
                            <group name="service_details" string="Service Details">
                                <field name="category" widget="selection" options="{'no_create': True}" />
                                <field name="service_type" widget="selection" />
                                <field name="service_code" placeholder="e.g., SHRED-001, STOR-002" />
                                <field name="state" />
                            </group>
                            <group name="pricing" string="Pricing">
                                <field name="purchase_cost" widget="monetary" options="{'currency_field': 'currency_id'}" />
                                <field name="currency_id" options="{'no_create': True}" />
                                <field name="current_value" widget="monetary" options="{'currency_field': 'currency_id'}" readonly="1" />
                            </group>
                        </group>
                        <group>
                            <group name="operational_settings" string="Operational Settings">
                                <field name="assigned_user_id" />
                                <field name="department_id" />
                                <field name="location_id" />
                                <field name="maintenance_interval_days" />
                            </group>
                            <group name="compliance" string="Maintenance &amp; Quality">
                                <field name="last_maintenance_date" />
                                <field name="next_maintenance_date" />
                                <field name="is_maintenance_due" />
                                <field name="efficiency_rating" />
                            </group>
                        </group>
                        <notebook>
                            <page string="Description" name="description">
                                <group>
                                    <field name="specifications" nolabel="1" placeholder="Technical specifications and detailed service description..." />
                                    <separator string="Operating Instructions" />
                                    <field name="operating_instructions" nolabel="1" placeholder="Operating procedures and safety requirements..." />
                                    <separator string="Safety Notes" />
                                    <field name="safety_notes" nolabel="1" placeholder="Safety requirements and precautions..." />
                                </group>
                            </page>
                            <page string="Equipment &amp; Maintenance" name="maintenance">
                                <group>
                                    <group string="Equipment Details">
                                        <field name="model_number" />
                                        <field name="serial_number" />
                                        <field name="manufacturer" />
                                        <field name="capacity" />
                                        <field name="capacity_unit" />
                                    </group>
                                    <group string="Maintenance">
                                        <field name="last_maintenance_date" />
                                        <field name="next_maintenance_date" />
                                        <field name="maintenance_interval_days" />
                                        <field name="is_maintenance_due" />
                                    </group>
                                </group>
                            </page>
                            <page string="Maintenance Requests" name="maintenance_requests">
                                <field name="maintenance_request_ids" nolabel="1">
                                    <list editable="bottom">
                                        <field name="name" />
                                        <field name="maintenance_type" />
                                        <field name="schedule_date" />
                                        <field name="stage_id" />
                                        <field name="cost" widget="monetary" />
                                    </list>
                                </field>
                            </page>
                            <page string="Assignment &amp; Settings" name="assignment">
                                <group>
                                    <group string="Assignment">
                                        <field name="user_id" />
                                        <field name="assigned_user_id" />
                                        <field name="department_id" />
                                        <field name="company_id" />
                                    </group>
                                    <group string="Settings">
                                        <field name="active" />
                                        <field name="state" />
                                        <field name="efficiency_rating" />
                                        <field name="utilization_rate" />
                                    </group>
                                </group>
                            </page>
                            <page string="Financial" name="financial">
                                <group>
                                    <group string="Cost Information">
                                        <field name="purchase_cost" widget="monetary" readonly="1" />
                                        <field name="current_value" widget="monetary" readonly="1" />
                                        <field name="maintenance_cost" widget="monetary" readonly="1" />
                                        <field name="depreciation_rate" widget="percentage" />
                                    </group>
                                    <group string="Dates">
                                        <field name="purchase_date" readonly="1" />
                                        <field name="warranty_expiry" readonly="1" />
                                        <field name="last_maintenance_date" readonly="1" />
                                        <field name="next_maintenance_date" readonly="1" />
                                    </group>
                                </group>
                            </page>
                        </notebook>
                    </sheet>
                    <div class="oe_chatter">
                        <field name="message_follower_ids" />
                        <field name="activity_ids" />
                        <field name="message_ids" />
                    </div>
                </form>
            </field>
        </record>
        <record id="service_item_view_search" model="ir.ui.view">
            <field name="name">service.item.view.search</field>
            <field name="model">service.item</field>
            <field name="arch" type="xml">
                <search string="Service Items">
                    <field name="name" string="Service Name" filter_domain="['|', ('name', 'ilike', self), ('service_code', 'ilike', self)]" />
                    <field name="category" />
                    <field name="service_type" />
                    <field name="service_code" />
                    <field name="specifications" />
                    <separator />
                    <filter string="Active Services" name="active" domain="[('active', '=', True)]" />
                    <filter string="Inactive Services" name="inactive" domain="[('active', '=', False)]" />
                    <separator />
                    <filter string="Available" name="available" domain="[('state', '=', 'available')]" />
                    <filter string="In Use" name="in_use" domain="[('state', '=', 'in_use')]" />
                    <filter string="Maintenance Due" name="maintenance_due" domain="[('is_maintenance_due', '=', True)]" />
                    <separator />
                    <filter string="Equipment Category" name="equipment" domain="[('category', '=', 'equipment')]" />
                    <filter string="Service Category" name="service" domain="[('category', '=', 'service')]" />
                    <separator />
                    <filter string="Activities" name="activities" domain="[('activity_ids', '!=', False)]" />
                    <filter string="My Services" name="my_services" domain="[('create_uid', '=', uid)]" />
                    <group expand="1" string="Group By">
                        <filter string="Category" name="group_category" domain="[]" context="{'group_by': 'category'}" />
                        <filter string="Type" name="group_type" domain="[]" context="{'group_by': 'service_type'}" />
                        <filter string="State" name="group_state" domain="[]" context="{'group_by': 'state'}" />
                        <filter string="Active Status" name="group_active" domain="[]" context="{'group_by': 'active'}" />
                        <filter string="Department" name="group_department" domain="[]" context="{'group_by': 'department_id'}" />
                        <filter string="Company" name="group_company" domain="[]" context="{'group_by': 'company_id'}" groups="base.group_multi_company" />
                        <separator />
                        <filter string="Creation Date" name="group_create_date" domain="[]" context="{'group_by': 'create_date:month'}" />
                    </group>
                </search>
            </field>
        </record>
        <record id="action_service_item" model="ir.actions.act_window">
            <!-- OPTIMIZATION: Model service.item has state field - consider using default search filters -->
            <field name="name">Service Items</field>
            <field name="res_model">service.item</field>
            <field name="view_mode>list,form</field>
            <field name="domain">[]</field>
            <field name="context">{
        'search_default_active': 1,
        'default_active': True,
    }</field>
            <field name="help" type="html">
                <p class="o_view_nocontent_create">
            Click to create a new service item.
        </p>
                <p>
            Service items define the various services your Records Management business offers,
            including shredding services, storage solutions, pickup requests, and compliance auditing.
            Each service item includes pricing, operational requirements, compliance settings, and portal visibility.
        </p>
            </field>
        </record>
        <record id="action_service_item_active" model="ir.actions.act_window">
            <!-- OPTIMIZATION: Model service.item has state field - consider using default search filters -->
            <field name="name">Active Services</field>
            <field name="res_model">service.item</field>
            <field name="view_mode>list,form</field>
            <field name="domain">[('active', '=', True)]</field>
            <field name="context">{
        'search_default_group_category': 1,
    }</field>
        </record>
        <record id="action_service_item_naid" model="ir.actions.act_window">
            <!-- OPTIMIZATION: Model service.item has state field - consider using default search filters -->
            <field name="name">NAID Compliant Services</field>
            <field name="res_model">service.item</field>
            <field name="view_mode>list,form</field>
            <field name="domain">[('category', '=', 'equipment'), ('active', '=', True)]</field>
            <field name="context">{
        'search_default_group_category': 1,
    }</field>
        </record>
        <record id="action_service_item_portal" model="ir.actions.act_window">
            <!-- OPTIMIZATION: Model service.item has state field - consider using default search filters -->
            <field name="name">Portal Services</field>
            <field name="res_model">service.item</field>
            <field name="view_mode>list,form</field>
            <field name="domain">[('state', '=', 'available'), ('active', '=', True)]</field>
            <field name="context">{
        'search_default_group_category': 1,
    }</field>
        </record>
        <record id="action_service_item_dashboard" model="ir.actions.act_window">
            <!-- OPTIMIZATION: Model service.item has state field - consider using default search filters -->
            <field name="name">Service Dashboard</field>
            <field name="res_model">service.item</field>
            <field name="view_mode>list,form</field>
            <field name="domain">[('active', '=', True)]</field>
            <field name="context">{
    'search_default_active': 1,
    'search_default_group_category': 1,
    'pivot_measures': ['request_count','total_revenue']
}</field>
            <field name="help" type="html">
                <p>Overview of all active services with quick access to categories and key metrics.</p>
            </field>
        </record>
        <record id="action_service_item_category" model="ir.actions.act_window">
            <!-- OPTIMIZATION: Model service.item has state field - consider using default search filters -->
            <field name="name">Service Categories</field>
            <field name="res_model">service.item</field>
            <field name="view_mode>list,form</field>
            <field name="domain">[('category','!=',False)]</field>
            <field name="context">{
    'search_default_group_category': 1,
    'searchpanel_default_groupby': 'category'
}</field>
            <field name="help" type="html">
                <p>List of services grouped by category for mass maintenance.</p>
            </field>
        </record>
        <record id="action_service_item_template" model="ir.actions.act_window">
            <!-- OPTIMIZATION: Model service.item has state field - consider using default search filters -->
            <field name="name">Service Templates</field>
            <field name="res_model">service.item</field>
            <field name="view_mode>list,form</field>
            <field name="domain">[('active', '=', True), ('state','=','draft')]</field>
            <field name="help" type="html">
                <p>Internal reusable templates not exposed on the portal.</p>
            </field>
        </record>
        <record id="action_service_item_request" model="ir.actions.act_window">
            <!-- OPTIMIZATION: Model service.item has state field - consider using default search filters -->
            <field name="name">Service Requests</field>
            <field name="res_model">service.item</field>
            <field name="view_mode>list,form</field>
            <field name="domain">[('state', '=', 'available'), ('active','=',True)]</field>
            <field name="context">{'search_default_available': 1}</field>
            <field name="help" type="html">
                <p>Services that customers are allowed to request directly.</p>
            </field>
        </record>
        <record id="action_service_item_schedule" model="ir.actions.act_window">
            <!-- OPTIMIZATION: Model service.item has state field - consider using default search filters -->
            <field name="name">Service Scheduling</field>
            <field name="res_model">service.item</field>
            <field name="view_mode>list,form</field>
            <field name="domain">[('state', '=', 'in_use'), ('active','=',True)]</field>
            <field name="help" type="html">
                <p>Services that automatically create tasks when requested.</p>
            </field>
        </record>
        <record id="action_service_item_billing" model="ir.actions.act_window">
            <!-- OPTIMIZATION: Model service.item has state field - consider using default search filters -->
            <field name="name">Service Billing</field>
            <field name="res_model">service.item</field>
            <field name="view_mode>list,form</field>
            <field name="domain">[('maintenance_cost','>',0)]</field>
            <field name="help" type="html">
                <p>Billable services with at least one pricing rule.</p>
            </field>
        </record>
        <record id="action_service_item_performance_report" model="ir.actions.act_window">
            <!-- OPTIMIZATION: Model service.item has state field - consider using default search filters -->
            <field name="name">Performance Report</field>
            <field name="res_model">service.item</field>
            <field name="view_mode">list</field>
            <field name="domain">[('request_count','&gt;',0)]</field>
            <field name="context">{'pivot_measures':['request_count','completed_count','average_completion_time','customer_satisfaction']}</field>
            <field name="help" type="html">
                <p>Analyze operational performance metrics of active services.</p>
            </field>
        </record>
        <record id="action_service_item_analytics" model="ir.actions.act_window">
            <!-- OPTIMIZATION: Model service.item has state field - consider using default search filters -->
            <field name="name">Usage Analytics</field>
            <field name="res_model">service.item</field>
            <field name="view_mode>tree</field>
            <field name="domain">[('total_revenue','&gt;',0)]</field>
            <field name="context">{'pivot_measures':['total_revenue','monthly_revenue','request_count']}</field>
            <field name="help" type="html">
                <p>Revenue and demand analytics for monetized services.</p>
            </field>
        </record>
        <record id="action_service_item_revenue_report" model="ir.actions.act_window">
            <!-- OPTIMIZATION: Model service.item has state field - consider using default search filters -->
            <field name="name">Revenue Report</field>
            <field name="res_model">service.item</field>
            <field name="view_mode>tree</field>
            <field name="domain">[('total_revenue', '&gt;', 0)]</field>
            <field name="context">{'pivot_measures':['total_revenue','monthly_revenue']}</field>
            <field name="help" type="html">
                <p>Focused revenue reporting view.</p>
            </field>
        </record>
        <record id="action_service_item_pricing_rules" model="ir.actions.act_window">
            <!-- OPTIMIZATION: Model service.item has state field - consider using default search filters -->
            <field name="name">Pricing Rules</field>
            <field name="res_model">service.item</field>
            <field name="view_mode>list,form</field>
            <field name="domain">[('maintenance_cost', '>', 0)]</field>
            <field name="help" type="html">
                <p>Services with conditional pricing logic.</p>
            </field>
        </record>
        <record id="action_service_item_quality_control" model="ir.actions.act_window">
            <!-- OPTIMIZATION: Model service.item has state field - consider using default search filters -->
            <field name="name">Quality Controls</field>
            <field name="res_model">service.item</field>
            <field name="view_mode>list,form</field>
            <field name="domain">[('is_maintenance_due', '=', True)]</field>
            <field name="help" type="html">
                <p>Services that require quality checks or audit trails.</p>
            </field>
        </record>
        <record id="action_service_item_mobile_tasks" model="ir.actions.act_window">
            <!-- OPTIMIZATION: Model service.item has state field - consider using default search filters -->
            <field name="name">Mobile Service Tasks</field>
            <field name="res_model">service.item</field>
            <field name="view_mode>list,form</field>
            <field name="domain">[('state', '=', 'available'), ('category','=','service')]</field>
            <field name="help" type="html">
                <p>Portal-visible services that also generate tasks for mobile/FSM workflows.</p>
            </field>
        </record>
        <record id="action_service_item_fsm_integration" model="ir.actions.act_window">
            <!-- OPTIMIZATION: Model service.item has state field - consider using default search filters -->
            <field name="name">FSM Integration</field>
            <field name="res_model">service.item</field>
            <field name="view_mode>list,form</field>
            <field name="domain">[('service_request_count', '>', 0)]</field>
            <field name="help" type="html">
                <p>Services configured for Field Service task automation.</p>
            </field>
        </record>
        <record id="action_portal_service_requests" model="ir.actions.act_window">
            <!-- OPTIMIZATION: Model service.item has state field - consider using default search filters -->
            <field name="name">Portal Service Requests</field>
            <field name="res_model">service.item</field>
            <field name="view_mode>list,form</field>
            <field name="domain">[('state', '=', 'available'), ('category','=','service')]</field>
            <field name="help" type="html">
                <p>Portal-visible services that customers may request.</p>
            </field>
        </record>
        <record id="action_service_item_self_service" model="ir.actions.act_window">
            <!-- OPTIMIZATION: Model service.item has state field - consider using default search filters -->
            <field name="name">Self-Service Setup</field>
            <field name="res_model">service.item</field>
            <field name="view_mode>list,form</field>
            <field name="domain">[('state', '=', 'draft'), ('category','!=','equipment')]</field>
            <field name="help" type="html">
                <p>Portal-visible informational services not requestable directly.</p>
            </field>
        </record>
    </data>
</odoo>
