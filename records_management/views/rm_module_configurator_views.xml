<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>
<!-- Enhanced List View with Status Indicators -->
    <record id="rm_module_configurator_view_tree" model="ir.ui.view">
        <field name="name">rm.module.configurator.view.tree</field>
        <field name="model">rm.module.configurator</field>
        <field name="arch" type="xml">
<list decoration-info="active == True" decoration-muted="active == False" decoration-success="value_boolean == True" decoration-danger="value_boolean == False">
    <field name="name" string="Configuration Name"/>

<field name="category" widget="badge"/>
<field name="config_key" string="Key"/>
<field name="description" string="Description"/>
<field name="value_boolean" widget="boolean_toggle" string="Enabled"/>
<field name="value_text" string="Value" optional="hide"/>

<field name="sequence"/>
<field name="active" widget="boolean_toggle"/>
<field name="company_id" groups="base.group_multi_company" optional="hide"/>
<field name="modified_by_id" widget="many2one_avatar_user" string="Owner" optional="hide"/>
<field name="last_modified" string="Modified" optional="hide"/>

</list>
</field>
</record>

<!-- Comprehensive Form View with Categorized Sections -->
<record id="rm_module_configurator_view_form" model="ir.ui.view">
    <field name="name">rm.module.configurator.view.form</field>
    <field name="model">rm.module.configurator</field>
    <field name="arch" type="xml">
        <form string="RM Module Configurator">
            <header>
                <!-- Removed non-existent action buttons: action_activate_config, action_deactivate_config, action_reset_to_default -->
                <!-- These methods don't exist in rm.module.configurator model -->
                <field name="active" widget="boolean_button" options="{'terminology': {'string_true': 'Active', 'string_false': 'Inactive'}}"/>
            </header>
<sheet>
<div class="oe_button_box" name="button_box">
    <button class="oe_stat_button" type="object" name="action_view_related_configurations" icon="fa-cogs">
        <field name="modification_count" widget="statinfo" string="Changes"/>
    </button>
</div>
<widget name="web_ribbon" title="System Configuration" bg_color="bg-info"/>

<div class="oe_title">
    <label for="name" class="oe_edit_only" string="Configuration Name"/>

<h1>
    <field name="name" placeholder="e.g., Enable Advanced Portal Features"/>

</h1>
<label for="description" class="oe_edit_only" string="Description"/>
<h3>
<field name="description" placeholder="Detailed description of this configuration option"/>
</h3>
</div>
<group>
<group string="Basic Configuration">
                <field name="config_key" string="Configuration Key"/>
                <field name="category" string="Category" widget="selection"/>
                <field name="sequence" string="Priority"/>
                <field name="config_type" string="Type" widget="selection"/></group>
<group string="Ownership &amp; Access">
<field name="company_id" groups="base.group_multi_company"/>
<field name="modified_by_id" string="Configuration Owner"/>

</group>
</group>
<notebook>
    <page string="Configuration Values" name="values">
        <group>
            <group string="Boolean Configuration" invisible="config_type != 'feature_toggle'">
                <field name="value_boolean" widget="boolean_toggle" string="Enable Feature"/>
            </group>
            <group string="Text Configuration" invisible="config_type != 'parameter'">
                <field name="value_text" string="Configuration Value"/>
            </group>
<group string="Numeric Configuration" invisible="config_type != 'parameter'">
    <field name="value_number" string="Numeric Value"/>
</group>
</group>
</page>
<page string="Selection Options" name="selection" invisible="config_type != 'parameter'">
    <field name="value_selection" string="Selected Value"/>
</page>
<page string="Documentation" name="documentation">
    <group>
        <field name="help_text" widget="html" string="Help Documentation"/>
        <field name="notes" widget="text" string="Internal Notes"/>
    </group>
</page>
<page string="Destruction Certificates" name="destruction_certificates">
    <group string="Feature Toggle">
        <field name="destruction_certificate_enabled"/>
        <field name="enable_chain_of_custody"/>

</group>
</page>
<page string="Field Service" name="fsm_features">
<group string="FSM Feature Toggles">
<field name="enable_fsm_features"/>
<field name="bin_inventory_enabled"/>

</group>
</page>
<page string="Reporting & Dashboards" name="reporting_dashboards">
    <group string="Management Dashboard">
        <field name="enable_management_dashboard"/>
    </group>
</page>
</notebook>
</sheet>
<div class="oe_chatter">
<field name="message_follower_ids"/>
<field name="activity_ids"/>
<field name="message_ids"/>
</div>
</form>
</field>
</record>

<!-- Advanced Search View with Dashboard Capabilities -->
<record id="rm_module_configurator_view_search" model="ir.ui.view">
    <field name="name">rm.module.configurator.view.search</field>
    <field name="model">rm.module.configurator</field>
    <field name="arch" type="xml">
        <search string="Configuration Search">
            <field name="name" string="Name" filter_domain="[('name', 'ilike', self)]"/>
            <field name="config_key" string="Key" filter_domain="[('config_key', 'ilike', self)]"/>
            <field name="category" string="Category"/>
            <field name="description" string="Description" filter_domain="[('description', 'ilike', self)]"/>

<field name="company_id" groups="base.group_multi_company"/>
<field name="modified_by_id" string="Owner"/>

<separator/>

<filter string="Active" name="filter_active" domain="[('active', '=', True)]"/>
<filter string="Inactive" name="filter_inactive" domain="[('active', '=', False)]"/>

<filter string="Disabled Features" name="filter_disabled" domain="[('value_boolean', '=', False)]"/>
<filter string="Enabled Features" name="filter_enabled" domain="[('value_boolean', '=', True)]"/>

<separator/>

<filter string="UI Configurations" name="filter_ui" domain="[('category', '=', 'ui')]"/>
<filter string="Feature Toggles" name="filter_features" domain="[('config_type', '=', 'feature_toggle')]"/>
<filter string="Security Settings" name="filter_security" domain="[('category', '=', 'security')]"/>
<filter string="Billing Options" name="filter_billing" domain="[('category', '=', 'billing')]"/>
<filter string="Portal Features" name="filter_portal" domain="[('category', '=', 'portal')]"/>
<filter string="Reporting Options" name="filter_reporting" domain="[('category', '=', 'reporting')]"/>
<filter string="FSM Settings" name="filter_fsm" domain="[('category', '=', 'fsm')]"/>
<filter string="Compliance" name="filter_compliance" domain="[('category', '=', 'compliance')]"/>

<separator/>

<filter string="High Priority" name="filter_high_priority" domain="[('sequence', '=', 1)]"/>
<filter string="System Configs" name="filter_system" domain="[('category', '=', 'system')]"/>

<filter string="My Configurations" name="filter_my_configs" domain="[('modified_by_id', '=', uid)]"/>
<!-- Removed invalid domain using undefined variable company_id. Odoo JS domain evaluator cannot resolve bare symbol 'company_id'.
    If needed later, reintroduce with a safe context-based default like domain="[('company_id','=', context.get('allowed_company_id'))]" and inject allowed_company_id via action context. -->
<!-- <filter string="My Company" name="filter_my_company" domain="[('company_id', '=', company_id)]"/> -->

<separator/>

<filter string="Recent" name="filter_recent" domain="[('recently_created_30d', '=', True)]"/>
<filter string="Recently Modified" name="filter_recently_modified" domain="[('recently_modified_7d', '=', True)]"/>
<group expand="0" string="Group By">
    <filter string="Category" name="group_by_category" context="{'group_by': 'category'}"/>
    <filter string="Company" name="group_by_company" context="{'group_by': 'company_id'}" groups="base.group_multi_company"/>

<filter string="Owner" name="group_by_user" context="{'group_by': 'modified_by_id'}"/>

<filter string="Priority" name="group_by_priority" context="{'group_by': 'sequence'}"/>
<filter string="Configuration Type" name="group_by_type" context="{'group_by': 'config_type'}"/>
<filter string="Status" name="group_by_status" context="{'group_by': 'active'}"/>
<filter string="Creation Date" name="group_by_create_date" context="{'group_by': 'create_date:month'}"/>

</group>
</search>
</field>
</record>

<!-- Kanban View for Dashboard -->
<record id="rm_module_configurator_view_kanban" model="ir.ui.view">
    <field name="name">rm.module.configurator.view.kanban</field>
    <field name="model">rm.module.configurator</field>
    <field name="arch" type="xml">
        <kanban default_group_by="category" class="o_kanban_dashboard">
            <field name="name"/>
            <field name="category"/>
            <field name="config_key"/>
            <field name="value_boolean"/>
            <field name="active"/>
            <field name="sequence"/>
            <field name="modified_by_id"/>
            <field name="company_id"/>
            <templates>
<t t-name="card">
    <div class="oe_kanban_card oe_kanban_global_click">
        <div class="o_kanban_record_top">
            <div class="o_kanban_record_headings">
                <strong class="o_kanban_record_title">
                    <field name="name"/>
                </strong>
                <small class="o_kanban_record_subtitle text-muted">
<i class="fa fa-key mr-1" title="Configuration Key"/>
<field name="config_key"/>

</small>
</div>
</div>
<div class="o_kanban_record_body">
    <div class="row">
        <div class="col-8">
            <span class="badge badge-pill" t-att-class="record.active and record.active.raw_value ? 'badge-success' : 'badge-secondary'">
                <t t-if="record.active and record.active.raw_value">
<i class="fa fa-check-circle" title="Active Status"/>
Active
</t>
<t t-else="">
<i class="fa fa-pause" title="Inactive Status"/>
Inactive
</t>
</span>
<span class="badge badge-pill badge-info" t-if="record.value_boolean and record.value_boolean.raw_value">Enabled</span>
<span class="badge badge-pill badge-warning" t-if="!record.value_boolean or !record.value_boolean.raw_value">Disabled</span>
</div>
<div class="col-4">
<span class="badge badge-danger" t-if="record.sequence and record.sequence.raw_value == 1">High</span>
<span class="badge badge-warning" t-if="record.sequence and record.sequence.raw_value == 2">Medium</span>
<span class="badge badge-info" t-if="record.sequence and record.sequence.raw_value == 3">Low</span>
</div>
</div>
<div t-if="record.config_type and record.config_type.raw_value == 'feature_toggle'" class="mt-2">
<small class="text-warning">Feature Toggle</small>
</div>
</div>
<div class="o_kanban_record_bottom">
    <div class="oe_kanban_bottom_left">
        <div t-if="record.modified_by_id and record.modified_by_id.raw_value">
<field name="modified_by_id" widget="many2one_avatar_user"/>
</div>
</div>
<div class="oe_kanban_bottom_right">
<div t-if="record.company_id and record.company_id.raw_value" groups="base.group_multi_company">
<i class="fa fa-building mr-1" title="Company"/>
<field name="company_id"/>

</div>
</div>
</div>
</div>
</t>
</templates>
</kanban>
</field>
</record>

<!-- Enhanced Action Window -->
<record id="action_rm_module_configurator" model="ir.actions.act_window">
<field name="name">Records Management Configurator</field>
<field name="res_model">rm.module.configurator</field>
            <field name="view_mode">kanban,list,form</field>
<field name="search_view_id" ref="rm_module_configurator_view_search"/>
<field name="domain">[]</field>
<field name="context">{
                'search_default_filter_active': 1,
                'search_default_group_by_category': 1
            }</field>
<field name="help" type="html">
    <p class="o_view_nocontent_smiling_face">
<i class="fa fa-cog" title="Configuration Settings"/>
Welcome to the Records Management Configurator!
</p>
<p>
<b>
    <i class="fa fa-bullseye" title="Target Configuration"/>
Centralized Configuration Management:</b>
<br/>
                    •<i class="fa fa-wrench" title="Tools"/>
<b>Feature Toggles:</b> Enable/disable optional functionality across the system<br/>
                    •<i class="fa fa-paint-brush" title="Customization"/>
<b>UI Customization:</b> Control field visibility and interface elements<br/>
                    •<i class="fa fa-lock" title="Security"/>
<b>Security Settings:</b> Configure access controls and permissions<br/>
                    •<i class="fa fa-money" title="Financial"/>
<b>Billing Options:</b> Manage financial and billing configurations<br/>
                    •<i class="fa fa-mobile" title="Mobile Features"/>
<b>Mobile Features:</b> Control mobile app and FSM functionality<br/>
                    •<i class="fa fa-bar-chart" title="Analytics"/>
<b>Reporting:</b> Configure analytics and report generation<br/>
                    •<i class="fa fa-link" title="External Connections"/>
<b>Integrations:</b> Manage external system connections<br/>
                    •<i class="fa fa-balance-scale" title="Compliance"/>
<b>Compliance:</b> NAID and regulatory compliance controls<br/>
                    •<i class="fa fa-building" title="Organization"/>
<b>Department-Specific:</b> Multi-tenant configuration management
</p>
<p>
<i>
    <i class="fa fa-rocket" title="Launch"/>
This centralized configurator ensures consistent system behavior and provides granular control over all Records Management features.</i>
</p>
</field>
</record>

<!-- Dashboard Action -->
<record id="action_rm_module_configurator_dashboard" model="ir.actions.act_window">
<field name="name">Configuration Dashboard</field>
<field name="res_model">rm.module.configurator</field>
<field name="view_mode">kanban</field>
<field name="view_id" ref="rm_module_configurator_view_kanban"/>
<field name="search_view_id" ref="rm_module_configurator_view_search"/>
<field name="context">{
                'search_default_filter_active': 1,
                'search_default_group_by_category': 1
            }</field>
</record>

<!-- Records Management Module Integration -->
<!-- Main configurator menu - placed in Records Management > Configuration -->
<menuitem id="menu_rm_module_configurator"
          name="Module Configuration"
          parent="menu_records_configuration"
          action="action_rm_module_configurator"
          sequence="5"
          groups="records_management.group_records_manager,base.group_system"/>

<!-- Keep a reference in Settings for system administrators -->
<menuitem id="menu_rm_configurator_admin"
          name="Records Management Configuration"
          parent="base.menu_administration"
          action="action_rm_module_configurator"
          sequence="15"
          groups="base.group_system"/>

    </data>
</odoo>
