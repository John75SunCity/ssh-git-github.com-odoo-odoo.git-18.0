<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>
        <record id="customer_inventory_view_kanban" model="ir.ui.view">
            <field name="name">customer.inventory.view.kanban</field>
            <field name="model">customer.inventory</field>
            <field name="arch" type="xml">
                <kanban class="o_kanban_customer_inventory" default_group_by="status">
                    <field name="partner_id" />
                    <field name="total_containers" />
                    <field name="total_documents" />
                    <field name="state" />
                    <templates>
                        <t t-name="card">
                            <div class="oe_kanban_card oe_kanban_global_click">
                                <div class="o_kanban_card_header">
                                    <strong>
                                        <i class="fa fa-bar-chart" title="Customer Inventory" />
                                        <field name="partner_id" />
                                    </strong>
                                    <span class="float-end">
                                        <field name="state" widget="label_selection" />
                                    </span>
                                </div>
                                <div class="o_kanban_card_content" t-att-title="record.display_name.raw_value" t-att-aria-label="record.display_name.raw_value" role="group">
                                    <div class="mb-2">
                                        <strong>Containers:</strong>
                                        <field name="total_containers" />
                                        <br />
                                        <strong>Documents:</strong>
                                        <field name="total_documents" />
                                    </div>
                                </div>
                            </div>
                        </t>
                    </templates>
                </kanban>
            </field>
        </record>
        <record id="customer_inventory_view_tree" model="ir.ui.view">
            <field name="name">customer.inventory.view.tree</field>
            <field name="model">customer.inventory</field>
            <field name="arch" type="xml">
                <list>
                    <field name="partner_id" />
                    <field name="total_containers" />
                    <field name="total_documents" />
                    <field name="state" widget="badge" />
                    <field name="last_updated" widget="date" />
                </list>
            </field>
        </record>
        <record id="customer_inventory_view_form" model="ir.ui.view">
            <field name="name">customer.inventory.view.form</field>
            <field name="model">customer.inventory</field>
            <field name="arch" type="xml">
                <form>
                    <sheet>
                        <div class="oe_title">
                            <h1>
                                <field name="partner_id" />
                            </h1>
                        </div>
                        <group>
                            <field name="total_containers" />
                            <field name="total_documents" />
                            <field name="state" />
                            <field name="last_updated" />
                        </group>
                    </sheet>
                </form>
            </field>
        </record>
        <record id="action_customer_inventory" model="ir.actions.act_window">
            <field name="name">Customer Inventory</field>
            <field name="res_model">records.container</field>
            <field name="view_mode">list,kanban,form</field>
            <field name="context">{
                'search_default_group_by_customer': 1,
                'search_default_active': 1,
            }</field>
            <field name="domain">[]</field>
            <field name="help" type="html">
                <p class="o_view_nocontent_smiling_face">
                    <i class="fa fa-cubes"/> No customer inventory yet!
                </p>
                <p>
                    <b>ðŸ“Š Customer Inventory Management:</b>
                </p>
                <ul>
                    <li>Track all containers and documents by customer</li>
                    <li>Monitor inventory levels and locations</li>
                    <li>Generate detailed inventory reports</li>
                    <li>Manage customer-specific retention policies</li>
                </ul>
                <p>
                    <b>ðŸŽ¯ Key Features:</b>
                </p>
                <ul>
                    <li>Customer-specific inventory views</li>
                    <li>Real-time location tracking</li>
                    <li>Automated inventory audits</li>
                    <li>Compliance reporting and analytics</li>
                </ul>
                <p>
                    <b>ðŸš€ To view customer inventory:</b>
                </p>
                <ul>
                    <li>Containers are automatically grouped by customer/partner</li>
                    <li>Use search filters to narrow by location, status, or container type</li>
                    <li>Click on a customer group to see their containers</li>
                    <li>Access detailed reports from Operations &gt; Reports menu</li>
                </ul>
                <p>
                    ðŸ’¡ <b>Note:</b> For periodic inventory snapshots and audits, use the 
                    <i>Compliance &amp; Reports &gt; Inventory Snapshots</i> menu.
                </p>
            </field>
        </record>
                </p>
                <ol>
                    <li>Click the <b>New</b> button above</li>
                    <li>Select <b>Customer</b> (the partner whose inventory to snapshot)</li>
                    <li>Set <b>Inventory Date</b> (typically month-end or billing cycle date)</li>
                    <li>Choose <b>Department</b> if customer has multiple departments</li>
                    <li>System auto-generates <b>Inventory Name</b> (e.g., "INV-ABC-Corp-202501")</li>
                    <li>Click <b>Generate Inventory</b> - system automatically:
                        <ul>
                            <li>Counts all active containers for customer</li>
                            <li>Calculates total storage volume (cubic feet)</li>
                            <li>Lists all documents and their retention status</li>
                            <li>Determines storage locations and distribution</li>
                            <li>Calculates billing amounts based on rates</li>
                        </ul>
                    </li>
                    <li>Review the <b>Inventory Lines</b> tab (detailed item list)</li>
                    <li>Check <b>Summary Totals</b> (containers, documents, volume, cost)</li>
                    <li>Click <b>Confirm</b> to lock the inventory (creates immutable snapshot)</li>
                    <li>Use <b>Print Report</b> to generate customer-facing inventory report</li>
                    <li>Click <b>Send to Customer</b> to email report via portal</li>
                </ol>
                <p>
                    <b>ðŸ“Š Inventory Status Workflow:</b>
                </p>
                <ul>
                    <li><b>Draft:</b> Inventory being generated, can be recalculated</li>
                    <li><b>Confirmed:</b> Inventory locked, represents point-in-time snapshot</li>
                    <li><b>Sent:</b> Inventory report delivered to customer</li>
                    <li><b>Approved:</b> Customer acknowledged inventory accuracy</li>
                    <li><b>Disputed:</b> Customer questions inventory (requires investigation)</li>
                </ul>
                <p>
                    <b>ðŸš€ Key Features:</b><br/>
                    â€¢ Automated inventory generation from current container data<br/>
                    â€¢ Point-in-time snapshot for billing accuracy<br/>
                    â€¢ Detailed line items (container-by-container breakdown)<br/>
                    â€¢ Storage location distribution analysis<br/>
                    â€¢ Retention policy compliance tracking<br/>
                    â€¢ Billing calculation with rate verification<br/>
                    â€¢ Customer portal integration for self-service access<br/>
                    â€¢ Historical inventory comparison and trending<br/>
                    â€¢ Export to Excel for customer analysis
                </p>
                <p>
                    <b>ðŸ’¡ Best Practice:</b> Generate inventory at the same time each month (e.g., last day of month) for consistency. Always confirm inventory before billing cycle runs.
                </p>
            </field>
        </record>
        
        <!-- Inventory Snapshots - Periodic audit records -->
        <record id="action_inventory_snapshots" model="ir.actions.act_window">
            <field name="name">Inventory Snapshots</field>
            <field name="res_model">customer.inventory</field>
            <field name="view_mode">list,kanban,form</field>
            <field name="context">{'search_default_state_completed': 1}</field>
            <field name="help" type="html">
                <p class="o_view_nocontent_smiling_face">
                    <i class="fa fa-camera"/> No inventory snapshots yet!
                </p>
                <p>
                    <b>ðŸ“¸ Inventory Snapshot Management:</b>
                </p>
                <ul>
                    <li>Create periodic inventory audits</li>
                    <li>Track inventory changes over time</li>
                    <li>Verify container counts and locations</li>
                    <li>Generate compliance audit reports</li>
                </ul>
                <p>
                    <b>ðŸŽ¯ Use Cases:</b>
                </p>
                <ul>
                    <li><b>Full Inventory:</b> Complete count of all items</li>
                    <li><b>Sample Inventory:</b> Statistical sampling for verification</li>
                    <li><b>Variance Check:</b> Compare against previous counts</li>
                    <li><b>Audit Inventory:</b> Compliance and regulatory audits</li>
                </ul>
                <p>
                    ðŸ’¡ <b>Note:</b> For real-time customer inventory views, use the 
                    <i>Inventory &gt; Customer Inventory</i> menu.
                </p>
            </field>
        </record>
    </data>
</odoo>
