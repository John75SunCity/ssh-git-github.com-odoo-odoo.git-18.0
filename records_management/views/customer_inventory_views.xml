<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>
        <record id="customer_inventory_view_kanban" model="ir.ui.view">
            <field name="name">customer.inventory.view.kanban</field>
            <field name="model">customer.inventory</field>
            <field name="arch" type="xml">
                <kanban class="o_kanban_customer_inventory" default_group_by="status">
                    <field name="partner_id" />
                    <field name="total_containers" />
                    <field name="total_documents" />
                    <field name="state" />
                    <templates>
                        <t t-name="card">
                            <div class="oe_kanban_card oe_kanban_global_click">
                                <div class="o_kanban_card_header">
                                    <strong>
                                        <i class="fa fa-bar-chart" />
                                        <field name="partner_id" />
                                    </strong>
                                    <span class="float-end">
                                        <field name="state" widget="label_selection" />
                                    </span>
                                </div>
                                <div class="o_kanban_card_content" t-att-title="record.display_name.raw_value" t-att-aria-label="record.display_name.raw_value" role="group">
                                    <div class="mb-2">
                                        <strong>Containers:</strong>
                                        <field name="total_containers" />
                                        <br />
                                        <strong>Documents:</strong>
                                        <field name="total_documents" />
                                    </div>
                                </div>
                            </div>
                        </t>
                    </templates>
                </kanban>
            </field>
        </record>
        <record id="customer_inventory_view_tree" model="ir.ui.view">
            <field name="name">customer.inventory.view.tree</field>
            <field name="model">customer.inventory</field>
            <field name="arch" type="xml">
                <list>
                    <field name="partner_id" />
                    <field name="total_containers" />
                    <field name="total_documents" />
                    <field name="state" widget="badge" />
                    <field name="last_updated" widget="date" />
                </list>
            </field>
        </record>
        <record id="customer_inventory_view_form" model="ir.ui.view">
            <field name="name">customer.inventory.view.form</field>
            <field name="model">customer.inventory</field>
            <field name="arch" type="xml">
                <form>
                    <sheet>
                        <div class="oe_title">
                            <h1>
                                <field name="partner_id" />
                            </h1>
                        </div>
                        <group>
                            <field name="total_containers" />
                            <field name="total_documents" />
                            <field name="state" />
                            <field name="last_updated" />
                        </group>
                    </sheet>
                </form>
            </field>
        </record>
        <record id="action_customer_inventory" model="ir.actions.act_window">
            <!-- OPTIMIZATION: Model customer.inventory has state field - consider using default search filters -->
            <field name="name">Customer Inventory</field>
            <field name="res_model">customer.inventory</field>
            <field name="view_mode">list,form</field>
            <field name="help" type="html">
                <p class="o_view_nocontent_smiling_face">
                    <i class="fa fa-bar-chart"/> No customer inventory data yet!
                </p>
                <p>
                    <b>‚ö†Ô∏è Prerequisites for customer inventory:</b>
                </p>
                <ul>
                    <li>‚úì <b>Customer Setup</b> - Go to: <i>Contacts</i> (create customers with "Is a Records Management Customer" enabled)</li>
                    <li>‚úì <b>Containers Created</b> - Go to: <i>Operations &gt; Containers</i> (customers must have stored containers)</li>
                    <li>‚úì <b>Documents Added</b> - Go to: <i>Operations &gt; Documents</i> (link documents to containers)</li>
                    <li>‚úì <b>Inventory Period</b> - Define reporting period (monthly, quarterly, annual)</li>
                </ul>
                <p>
                    <b>üìã Understanding Customer Inventory:</b>
                </p>
                <p>
                    Customer Inventory provides a <b>comprehensive snapshot</b> of all items stored for each customer at a 
                    specific point in time. This is essential for billing accuracy, customer reporting, and regulatory compliance. 
                    Inventory records track containers, documents, storage locations, and associated costs.
                </p>
                <p>
                    <b>üéØ To create an inventory snapshot:</b>
                </p>
                <ol>
                    <li>Click the <b>New</b> button above</li>
                    <li>Select <b>Customer</b> (the partner whose inventory to snapshot)</li>
                    <li>Set <b>Inventory Date</b> (typically month-end or billing cycle date)</li>
                    <li>Choose <b>Department</b> if customer has multiple departments</li>
                    <li>System auto-generates <b>Inventory Name</b> (e.g., "INV-ABC-Corp-202501")</li>
                    <li>Click <b>Generate Inventory</b> - system automatically:
                        <ul>
                            <li>Counts all active containers for customer</li>
                            <li>Calculates total storage volume (cubic feet)</li>
                            <li>Lists all documents and their retention status</li>
                            <li>Determines storage locations and distribution</li>
                            <li>Calculates billing amounts based on rates</li>
                        </ul>
                    </li>
                    <li>Review the <b>Inventory Lines</b> tab (detailed item list)</li>
                    <li>Check <b>Summary Totals</b> (containers, documents, volume, cost)</li>
                    <li>Click <b>Confirm</b> to lock the inventory (creates immutable snapshot)</li>
                    <li>Use <b>Print Report</b> to generate customer-facing inventory report</li>
                    <li>Click <b>Send to Customer</b> to email report via portal</li>
                </ol>
                <p>
                    <b>üìä Inventory Status Workflow:</b>
                </p>
                <ul>
                    <li><b>Draft:</b> Inventory being generated, can be recalculated</li>
                    <li><b>Confirmed:</b> Inventory locked, represents point-in-time snapshot</li>
                    <li><b>Sent:</b> Inventory report delivered to customer</li>
                    <li><b>Approved:</b> Customer acknowledged inventory accuracy</li>
                    <li><b>Disputed:</b> Customer questions inventory (requires investigation)</li>
                </ul>
                <p>
                    <b>üöÄ Key Features:</b><br/>
                    ‚Ä¢ Automated inventory generation from current container data<br/>
                    ‚Ä¢ Point-in-time snapshot for billing accuracy<br/>
                    ‚Ä¢ Detailed line items (container-by-container breakdown)<br/>
                    ‚Ä¢ Storage location distribution analysis<br/>
                    ‚Ä¢ Retention policy compliance tracking<br/>
                    ‚Ä¢ Billing calculation with rate verification<br/>
                    ‚Ä¢ Customer portal integration for self-service access<br/>
                    ‚Ä¢ Historical inventory comparison and trending<br/>
                    ‚Ä¢ Export to Excel for customer analysis
                </p>
                <p>
                    <b>üí° Best Practice:</b> Generate inventory at the same time each month (e.g., last day of month) for consistency. Always confirm inventory before billing cycle runs.
                </p>
            </field>
        </record>
    </data>
</odoo>
