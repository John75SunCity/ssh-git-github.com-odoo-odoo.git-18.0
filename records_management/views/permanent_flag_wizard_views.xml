<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>
<!-- Form view for Permanent Flag Wizard -->
<record id="records_permanent_flag_wizard_view_form" model="ir.ui.view">
<field name="name">records.permanent.flag.wizard.manager.view.form</field>
<field name="model">records.permanent.flag.wizard.manager</field>
    <field name="arch" type="xml">
        <form>
            <header>
                <h1>
<span invisible="operation_type != 'set'">
Mark Documents as PERMANENT
                    </span>
<span invisible="operation_type != 'remove'">
Remove PERMANENT Flag (Admin Only)
                    </span>
                </h1>
            </header>
            <sheet>
<div class="alert alert-info" role="status" invisible="operation_type != 'set'">
    <strong>
        PERMANENT RECORD PROTECTION</strong>
    <br />

                            Documents marked as permanent will be <strong>excluded from all destruction schedules</strong>
                            and shredding rotations. This action requires password verification for security.
                </div>

<div class="alert alert-warning" role="alert" invisible="operation_type != 'remove'">
    <strong>
         ADMINISTRATOR SECURITY WARNING</strong>
    <br />

                            You are about to <strong>remove permanent protection</strong> from documents.
                            This will allow them to be included in destruction schedules again.
</div>

<group>
    <group string="Documents to Process">
        <field name="document_count" string="Number of Documents"/>
<field name="operation_type" readonly="1"/>

        <field name="document_ids" widget="many2many_tags" readonly="1" options="{'no_create': True, 'no_edit': True}"/>
    </group>

<group string="Security Verification">
    <div class="alert alert-secondary" role="status">
<i class='fa fa-shield' title="Security Protection" />


        <strong>Password Required:</strong>
<br />

                                    Enter your user password to confirm this security-sensitive action.
    </div>
    <field name="user_password" password="True" placeholder="Enter your password"/>
</group>
</group>

<div class="mt-3">
    <h4><i class='fa fa-clipboard'/> Selected Documents:</h4>
    <field name="document_ids" mode="list" nolabel="1">
<list decoration-success="is_permanent == True" decoration-muted="is_permanent == False">
    <field name="name"/>
    <field name="partner_id"/>
<field name="storage_box_id"/>


<field name="is_permanent" string="Currently Permanent" widget="boolean"/>

<field name="permanent_user_id" string="Set By" invisible="not is_permanent"/>
<field name="permanent_date" string="Set Date" invisible="not is_permanent"/>
</list>
</field>
</div>
</sheet>
<footer>
<button name="action_apply_changes" type="object" string="Confirm Permanent Flag" class="btn-primary" invisible="operation_type != 'set'"/>

<button name="action_apply_changes" type="object" string="Remove Permanent Flag" class="btn-warning" invisible="operation_type != 'remove'"/>

<button string="Cancel" class="btn-secondary" special="cancel"/>
</footer>
</form>
</field>
</record>
<!-- Action for Permanent Flag Wizard -->
<record id="action_records_permanent_flag_wizard" model="ir.actions.act_window">
    <field name="name">Permanent Flag Management</field>
<field name="res_model">records.permanent.flag.wizard.manager</field>
    <field name="view_mode">form</field>
    <field name="target">new</field>
</record>
</data>
</odoo>
