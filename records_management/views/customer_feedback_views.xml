<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>


       <!-- Removed duplicate root menu to avoid a second Records Management app icon
           The canonical root menu is defined in records_management/views/records_management_menu_roots.xml
           with id="menu_records_management_root". -->

        <record id="customer_feedback_view_tree" model="ir.ui.view">
            <field name="name">customer.feedback.view.tree</field>
            <field name="model">customer.feedback</field>
            <field name="arch" type="xml">
                <list string="Customer Feedback" default_order="create_date desc">
                    <field name="name" />
                    <field name="state" />
                    <field name="user_id" />
                    <field name="company_id" optional="show" />
                    <field name="write_date" widget="relative" optional="show" />
                    <!-- Removed always-invisible 'active' field to satisfy test_views (unnecessary in tree) -->
                </list>
            </field>
        </record>
        <record id="customer_feedback_view_search" model="ir.ui.view">
            <field name="name">customer.feedback.view.search</field>
            <field name="model">customer.feedback</field>
            <field name="arch" type="xml">
                <search string="Search Feedback">
                    <field name="name" />
                    <field name="state" />
                    <field name="user_id" />
                    <filter string="My Items" name="my_items" domain="[('user_id', '=', uid)]" />
                    <filter string="New" name="state_new" domain="[('state', '=', 'new')]" />
                    <filter string="In Progress" name="state_in_progress" domain="[('state', '=', 'in_progress')]" />
                    <filter string="Archived" name="inactive" domain="[('active','=',False)]" />
                    <group expand="0" string="Group By">
                        <filter string="Assigned To" name="grp_user" context="{'group_by': 'user_id'}" />
                        <filter string="Status" name="grp_state" context="{'group_by': 'state'}" />
                        <filter string="Company" name="grp_company" context="{'group_by': 'company_id'}" />
                    </group>
                </search>
            </field>
        </record>
        <record id="customer_feedback_view_form" model="ir.ui.view">
            <field name="name">customer.feedback.view.form</field>
            <field name="model">customer.feedback</field>
            <field name="arch" type="xml">
                <form string="Customer Feedback" create="1" edit="1">
                    <sheet>
                        <div class="oe_button_box" name="button_box">

</div>
                        <group>
                            <group>
                                <field name="name" />
                                <field name="state" widget="statusbar" statusbar_visible="new,acknowledged,in_progress,resolved,closed" />
                                <field name="user_id" />
                            </group>
                            <group>
                                <field name="company_id" groups="base.group_multi_company" />
                                <field name="active" />
                            </group>
                        </group>
                    </sheet>
                    <div class="oe_chatter">
                        <field name="message_follower_ids" widget="mail_followers" />
                        <field name="message_ids" widget="mail_thread" />
                    </div>
                </form>
            </field>
        </record>
        <record id="customer_feedback_action" model="ir.actions.act_window">
            <!-- OPTIMIZATION: Model customer.feedback has state field - consider using default search filters -->
            <field name="name">Customer Feedback</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">customer.feedback</field>
            <field name="view_mode">list,form</field>
            <field name="search_view_id" ref="customer_feedback_view_search" />
            <field name="context">{}</field>
            <field name="help" type="html">
                <p class="o_view_nocontent_smiling_face">
                    <i class="fa fa-comments"/> No customer feedback yet!
                </p>
                <p>
                    <b>‚ö†Ô∏è Prerequisites for feedback management:</b>
                </p>
                <ul>
                    <li>‚úì <b>Customer Portal Access</b> - Customers must have portal login to submit feedback</li>
                    <li>‚úì <b>Feedback Categories</b> - Configure improvement areas and themes</li>
                    <li>‚úì <b>Assigned Team</b> - Ensure staff are assigned to review and respond</li>
                    <li>‚úì <b>Email Templates</b> - Set up acknowledgment and resolution templates</li>
                    <li>‚úì <b>Escalation Rules</b> - Define when to escalate negative feedback</li>
                </ul>
                <p>
                    <b>üìã Understanding Customer Feedback System:</b>
                </p>
                <p>
                    The Customer Feedback system provides <b>AI-powered sentiment analysis</b> to automatically categorize 
                    and prioritize customer feedback. This modern system tracks feedback from submission through resolution, 
                    with automated workflows, notifications, and analytics to improve customer satisfaction.
                </p>
                <p>
                    <b>ü§ñ AI Sentiment Analysis Features:</b>
                </p>
                <ul>
                    <li><b>Automatic Categorization:</b> AI analyzes feedback text and assigns:
                        <ul>
                            <li>üòÄ <b>Positive:</b> Happy customers, testimonials, compliments</li>
                            <li>üòê <b>Neutral:</b> Questions, requests, informational</li>
                            <li>üòü <b>Negative:</b> Complaints, issues, concerns (auto-escalated)</li>
                        </ul>
                    </li>
                    <li><b>Sentiment Score:</b> -1.0 (very negative) to +1.0 (very positive)</li>
                    <li><b>Smart Priority:</b> Negative feedback automatically marked as high priority</li>
                    <li><b>Keyword Detection:</b> Identifies improvement areas (service, quality, speed, etc.)</li>
                </ul>
                <p>
                    <b>üíª Customer Submission (Portal):</b>
                </p>
                <ol>
                    <li>Customer logs into portal at: <i>yourcompany.odoo.com/my</i></li>
                    <li>Navigates to <b>Feedback</b> section</li>
                    <li>Clicks <b>Share Feedback</b> button</li>
                    <li>Selects <b>Rating</b> (1-5 stars)</li>
                    <li>Writes <b>Comments</b> (detailed feedback)</li>
                    <li>Optionally selects <b>Improvement Area</b> (Service Quality, Response Time, etc.)</li>
                    <li>Clicks <b>Submit</b></li>
                    <li>AI instantly analyzes sentiment and assigns category</li>
                    <li>Receives acknowledgment email</li>
                    <li>Can track status in portal</li>
                </ol>
                <p>
                    <b>‚öôÔ∏è Staff Processing Workflow:</b>
                </p>
                <ol>
                    <li>New feedback appears in <b>Customer Feedback</b> menu</li>
                    <li>System sends notification to assigned team</li>
                    <li>Staff reviews AI sentiment analysis and rating</li>
                    <li>Click <b>Acknowledge</b> (sends thank-you to customer)</li>
                    <li>If negative/issue:
                        <ul>
                            <li>Create <b>Corrective Action</b> (investigation, fix)</li>
                            <li>Assign to appropriate department</li>
                            <li>Set resolution deadline</li>
                        </ul>
                    </li>
                    <li>Move to <b>In Progress</b> when work begins</li>
                    <li>Add resolution notes in chatter</li>
                    <li>Click <b>Resolve</b> when issue is fixed</li>
                    <li>Customer receives resolution notification</li>
                    <li>Click <b>Close</b> to archive (customer confirmed resolution)</li>
                </ol>
                <p>
                    <b>üìä Feedback Lifecycle States:</b>
                </p>
                <ul>
                    <li><b>New:</b> Just submitted, awaiting initial review</li>
                    <li><b>Acknowledged:</b> Team aware, customer notified</li>
                    <li><b>In Progress:</b> Actively investigating or implementing fix</li>
                    <li><b>Resolved:</b> Issue fixed, solution communicated to customer</li>
                    <li><b>Closed:</b> Customer satisfied, feedback archived</li>
                </ul>
                <p>
                    <b>üöÄ Enterprise Features:</b><br/>
                    ‚Ä¢ <b>AI Sentiment Analysis:</b> Automatic categorization (positive/neutral/negative)<br/>
                    ‚Ä¢ <b>Smart Priority:</b> AI-driven priority assignment based on sentiment<br/>
                    ‚Ä¢ <b>Trend Analytics:</b> Dashboard showing sentiment trends over time<br/>
                    ‚Ä¢ <b>Improvement Areas:</b> Category-based tracking (service, quality, speed)<br/>
                    ‚Ä¢ <b>Automated Escalation:</b> Negative feedback auto-routed to management<br/>
                    ‚Ä¢ <b>Response Templates:</b> Quick replies for common feedback types<br/>
                    ‚Ä¢ <b>Portal Integration:</b> Customers track feedback status in real-time<br/>
                    ‚Ä¢ <b>Activity Tracking:</b> Complete timeline of all interactions<br/>
                    ‚Ä¢ <b>Performance Metrics:</b> Response time, resolution time, satisfaction scores
                </p>
                <p>
                    <b>üí° Best Practice:</b> Respond to all feedback within 24 hours. Use <i>My Items</i> filter to see your assigned feedback. Review sentiment analytics weekly to identify trends.
                </p>
            </field>
        </record>

    <!-- Duplicate menu removed - defined in records_management_menus.xml -->


    </data>
</odoo>
