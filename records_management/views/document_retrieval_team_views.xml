<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>
<!-- Inherited List View: add retrieval-specific columns -->
<record id="document_retrieval_team_view_tree" model="ir.ui.view">
<field name="name">maintenance.team.view.tree.inherit.retrieval</field>
<field name="model">maintenance.team</field>
<field name="inherit_id" ref="maintenance.maintenance_team_view_tree"/>

<field name="arch" type="xml">
<xpath expr="//tree" position="inside">
    <field name="team_code"/>
    <field name="member_count" optional="show"/>
    <field name="active_workorders" string="Active Orders" optional="hide"/>
    <field name="current_location_id" optional="hide"/>
    <field name="specialization" optional="show"/>
    <field name="state" widget="badge" optional="show"/>
</xpath>
</field>
</record>

<!-- Inherited Form View: add stat buttons, retrieval fields & notebook pages -->
<record id="document_retrieval_team_view_form" model="ir.ui.view">
<field name="name">maintenance.team.view.form.inherit.retrieval</field>
<field name="model">maintenance.team</field>
<field name="inherit_id" ref="maintenance.maintenance_team_view_form"/>

<field name="arch" type="xml">
<!-- Button box KPIs -->
<xpath expr="//sheet/div[@name='button_box']" position="inside">
    <button class="oe_stat_button" type="object" name="action_view_work_orders" icon="fa-tasks">
        <field name="active_workorders" string="Work Orders" widget="statbutton"/>


</button>
<button class="oe_stat_button" type="object" name="action_view_team_members" icon="fa-users">
<field name="member_count" string="Team Members" widget="statbutton"/>

</button>
<button class="oe_stat_button" type="object" name="action_view_performance_metrics" icon="fa-bar-chart" groups="records_management.group_records_manager">
<field name="completed_orders_count" string="Completed Orders" widget="statbutton"/>

</button>
</xpath>
<!-- Core retrieval fields grouped -->
<xpath expr="//sheet" position="inside">
<group string="Retrieval Team Configuration" name="retrieval_team_config">
    <group>
                            <field name="team_code" required="1"/>
<field name="team_leader_id"/>
<field name="specialization"/>

                            <field name="current_location_id"/>
<field name="priority_level" widget="priority"/>

                        </group>
<group>
                            <field name="max_concurrent_orders"/>
                            <field name="avg_retrieval_time_hours"/>
                            <field name="success_rate_percentage"/>
<field name="active"/>

                        </group>
                    </group>
</xpath>
<!-- Notebook additions -->
<xpath expr="//sheet" position="inside">
<notebook name="retrieval_team_notebook">
    <page string="Team Members" name="team_members_extra">
                            <field name="member_ids" nolabel="1">
                                <list editable="bottom">
                                    <field name="user_id" required="1"/>
<field name="role"/>

                                    <field name="date_joined"/>
                                    <field name="specialization"/>
                                    <field name="active"/>
                                </list>
                            </field>
                        </page>
<page string="Current Work Orders" name="current_orders_extra">
                            <field name="current_workorder_ids" nolabel="1">
<list create="false" edit="false" decoration-info="state=='locating'" decoration-warning="state=='retrieving'" decoration-success="state=='completed'">
                                    <field name="name"/>
<field name="partner_id"/>

                                    <field name="priority" widget="priority"/>
                                    <field name="scheduled_date"/>
<field name="item_count"/>

                                    <field name="state" widget="badge"/>
<button name="action_view_work_order" type="object" string="Open" icon="fa-external-link"/>

                                </list>
                            </field>
                        </page>
<page string="Equipment &amp; Tools" name="equipment_extra">
                            <group>
<group string="Standard Equipment">
                                    <field name="has_mobile_scanner"/>
                                    <field name="has_tablet_device"/>
                                    <field name="has_safety_equipment"/>
<field name="vehicle_id"/>

                                </group>
<group string="Specialized Tools">
                                    <field name="can_access_offsite_locations"/>
                                    <field name="has_ladder_equipment"/>
                                    <field name="has_heavy_lifting_tools"/>
                                    <field name="max_container_access_height"/>
                                </group>
                            </group>
                        </page>
<page string="Schedule &amp; Availability" name="schedule_extra">
                            <group>
<group string="Working Hours">
                                    <field name="shift_start_time" widget="float_time"/>
                                    <field name="shift_end_time" widget="float_time"/>
                                    <field name="working_days" widget="many2many_checkboxes"/>
                                </group>
<group string="Availability">
                                    <field name="is_emergency_team"/>
                                    <field name="can_work_weekends"/>
                                    <field name="can_work_after_hours"/>
                                    <field name="next_available_date"/>
                                </group>
                            </group>
                        </page>
<page string="Performance Metrics" name="performance_extra" groups="records_management.group_records_manager">
                            <group>
<group string="Efficiency Metrics">
                                    <field name="completed_orders_count" readonly="1"/>
                                    <field name="avg_completion_time_days" readonly="1"/>
                                    <field name="success_rate_percentage" readonly="1"/>
                                    <field name="customer_satisfaction_score" readonly="1"/>
                                </group>
<group string="Productivity Metrics">
                                    <field name="total_items_retrieved" readonly="1"/>
                                    <field name="avg_items_per_day" readonly="1"/>
                                    <field name="total_containers_accessed" readonly="1"/>
                                    <field name="efficiency_rating" widget="priority" readonly="1"/>
                                </group>
                            </group>
                        </page>
<page string="Notes &amp; Comments" name="notes_extra">
                            <group>
                                <field name="description" nolabel="1" placeholder="Team description, special capabilities, and operational notes..."/>
                            </group>
<group groups="records_management.group_records_manager">
    <field name="internal_notes" nolabel="1" placeholder="Internal management notes and observations..."/>

                            </group>
                        </page>
                    </notebook>
</xpath>
</field>
</record>

<!-- Inherited Kanban View: expose extra fields (light touch to avoid template conflicts) -->
<record id="document_retrieval_team_view_kanban" model="ir.ui.view">
<field name="name">maintenance.team.view.kanban.inherit.retrieval</field>
<field name="model">maintenance.team</field>
<field name="inherit_id" ref="maintenance.maintenance_team_view_kanban"/>

<field name="arch" type="xml">
<xpath expr="//kanban" position="inside">
    <field name="member_count"/>

<field name="active_workorders"/>

<field name="specialization"/>

<field name="current_location_id"/>

</xpath>
</field>
</record>

<!-- Inherited Search View: add retrieval filters & fields -->
<record id="document_retrieval_team_view_search" model="ir.ui.view">
<field name="name">maintenance.team.view.search.inherit.retrieval</field>
<field name="model">maintenance.team</field>
<field name="inherit_id" ref="maintenance.maintenance_team_view_search"/>

<field name="arch" type="xml">
<xpath expr="//search" position="inside">
    <field name="team_code"/>
    <field name="specialization"/>
    <field name="current_location_id"/>
    <separator/>


<filter name="available" string="Available" domain="[('state','=','available')]"/>
<filter name="busy" string="Busy" domain="[('state','=','busy')]"/>
<filter name="unavailable" string="Unavailable" domain="[('state','=','unavailable')]"/>

<separator/>


<filter name="emergency_teams" string="Emergency Teams" domain="[('is_emergency_team','=',True)]"/>
<filter name="weekend_available" string="Weekend Available" domain="[('can_work_weekends','=',True)]"/>
<filter name="after_hours_available" string="After Hours Available" domain="[('can_work_after_hours','=',True)]"/>
</xpath>
</field>
</record>
<!-- Original standalone definitions replaced with inheritance patches -->
</data>
</odoo>
