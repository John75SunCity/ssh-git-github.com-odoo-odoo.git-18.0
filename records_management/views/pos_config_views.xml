<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>

    <!-- ============================================================================
         POS CONFIG VIEWS - Records Management Integration
         Properly extends pos.config with only valid Records Management fields.
         ============================================================================ -->

    <!-- INHERITED FORM VIEW - Add Records Management section at the end -->
    <record id="pos_config_form_inherit_records_management" model="ir.ui.view">
        <field name="name">pos.config.form.inherit.records_management</field>
        <field name="model">pos.config</field>
        <field name="inherit_id" ref="point_of_sale.pos_config_view_form"/>
        <field name="arch" type="xml">
            <xpath expr="//form" position="inside">
                <separator string="üè™ Records Management Integration"/>
                <group>
                    <group string="Feature Settings">
                        <field name="enable_records_management" widget="boolean_toggle"/>
                        <field name="enable_walk_in_service" widget="boolean_toggle" invisible="not enable_records_management"/>
                        <field name="enable_pos_customer_history" widget="boolean_toggle" invisible="not enable_records_management"/>
                    </group>
                    <group string="Service Configuration" invisible="not enable_records_management">
                        <field name="destruction_service_product_id" invisible="not enable_records_management"/>
                        <field name="pickup_request_product_id" invisible="not enable_records_management"/>
                        <field name="default_destruction_location_id" invisible="not enable_records_management"/>
                    </group>
                </group>

                <separator string="Walk-In Customer Configuration" invisible="not enable_walk_in_service"/>
                <group invisible="not enable_walk_in_service">
                    <group string="Customer Setup">
                        <field name="walk_in_customer_id"/>
                        <field name="walk_in_pricelist_id"/>
                    </group>
                    <group string="Automation Options">
                        <field name="auto_create_customer" widget="boolean_toggle"/>
                        <field name="require_customer_info" widget="boolean_toggle"/>
                    </group>
                </group>
            </xpath>
        </field>
    </record>

    <!-- INHERITED KANBAN VIEW - Add Records Management fields to kanban -->
    <record id="pos_config_kanban_inherit_records_management" model="ir.ui.view">
        <field name="name">pos.config.kanban.inherit.records_management</field>
        <field name="model">pos.config</field>
        <field name="inherit_id" ref="point_of_sale.pos_config_kanban_view"/>
        <field name="arch" type="xml">
            <xpath expr="//kanban" position="inside">
                <field name="enable_records_management"/>
                <field name="enable_walk_in_service"/>
            </xpath>
        </field>
    </record>

    <!-- INHERITED TREE/LIST VIEW - Add Records Management columns -->
    <record id="pos_config_tree_inherit_records_management" model="ir.ui.view">
        <field name="name">pos.config.tree.inherit.records_management</field>
        <field name="model">pos.config</field>
        <field name="inherit_id" ref="point_of_sale.pos_config_view"/>
        <field name="arch" type="xml">
            <xpath expr="//tree/field[last()]" position="after">
                <field name="enable_records_management" widget="boolean"/>
                <field name="enable_walk_in_service" widget="boolean" invisible="not enable_records_management"/>
            </xpath>
        </field>
    </record>

    <!-- INHERITED SEARCH VIEW - Add Records Management filters -->
    <record id="pos_config_search_inherit_records_management" model="ir.ui.view">
        <field name="name">pos.config.search.inherit.records_management</field>
        <field name="model">pos.config</field>
        <field name="inherit_id" ref="point_of_sale.pos_config_search_view"/>
        <field name="arch" type="xml">
            <xpath expr="//search" position="inside">
                <separator/>
                <filter string="Records Management Enabled" name="records_mgmt_enabled" domain="[('enable_records_management', '=', True)]"/>
                <filter string="Walk-In Service Enabled" name="walk_in_enabled" domain="[('enable_walk_in_service', '=', True)]"/>
            </xpath>
        </field>
    </record>

    <!-- ACTION - Records Management POS Configurations -->
    <record id="action_pos_config_records_management" model="ir.actions.act_window">
        <field name="name">üè™ POS Configurations (Records Management)</field>
        <field name="res_model">pos.config</field>
        <field name="view_mode">kanban,list,form</field>
        <field name="search_view_id" ref="point_of_sale.pos_config_search_view"/>
        <field name="context">{'search_default_records_mgmt_enabled': 1, 'default_enable_records_management': True}</field>
        <field name="help" type="html">
            <p class="o_view_nocontent_smiling_face">
                üè™ Configure Point of Sale systems with Records Management integration!
            </p>
            <p>
                Set up POS terminals to process Records Management services including:
            </p>
            <ul>
                <li>Walk-in customer service for document pickup and destruction</li>
                <li>On-the-spot destruction services</li>
                <li>Document handling and tracking</li>
                <li>Integration with customer records and invoicing</li>
            </ul>
        </field>
    </record>

    <!-- MENU ITEM - POS Configuration (Records Management) -->
    <menuitem
        id="menu_pos_config_records_management"
        name="POS Configurations"
        parent="records_management.menu_records_management_portal"
        action="action_pos_config_records_management"
        groups="point_of_sale.group_pos_manager,records_management.group_records_manager"
        sequence="30"/>

    </data>
</odoo>
