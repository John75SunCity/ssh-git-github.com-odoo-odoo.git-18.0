<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>
        <!-- Container Indexing Wizard File Tree View -->
        <record id="container_indexing_wizard_file_view_list" model="ir.ui.view">
            <field name="name">container.indexing.wizard.file.list</field>
            <field name="model">container.indexing.wizard.file</field>
            <field name="arch" type="xml">
                <list string="Files" editable="bottom" create="1" delete="1">
                    <field name="sequence" widget="handle"/>
                    <field name="name" 
                           placeholder="e.g., HR-Personnel-2024, Finance-Invoices-Q1"
                           required="1"/>
                    <field name="description" 
                           placeholder="Brief description of file contents"/>
                    <field name="file_category"/>
                    <field name="received_date"/>
                    <field name="barcode" 
                           placeholder="Physical barcode (optional)"
                           widget="barcode"/>
                    <field name="temp_barcode_preview" 
                           string="Auto Temp Barcode"
                           readonly="1"/>
                    <field name="partner_id" column_invisible="1"/>
                </list>
            </field>
        </record>

        <!-- Container Indexing Wizard Form -->
        <record id="container_indexing_wizard_view_form" model="ir.ui.view">
            <field name="name">container.indexing.wizard.form</field>
            <field name="model">container.indexing.wizard</field>
            <field name="arch" type="xml">
                <form string="Container Indexing Service - Complete Manifest">
                    <header>
                        <button name="action_index_container" 
                                string="Generate Temp Barcodes &amp; Index Container" 
                                type="object" 
                                class="btn-primary"/>
                        <button string="Cancel" class="btn-secondary" special="cancel"/>
                    </header>
                    <sheet>
                        <div class="oe_title">
                            <h1>
                                <field name="container_name" readonly="1"/>
                            </h1>
                            <h3>
                                Container Indexing Service
                            </h3>
                            <p class="text-muted">
                                Create a complete manifest of ALL files in this container with barcodes and metadata
                            </p>
                        </div>
                        
                        <group>
                            <group string="Container Information">
                                <field name="container_id" invisible="1"/>
                                <field name="customer_id" string="Customer"/>
                                <field name="barcode" 
                                       placeholder="Scan or enter physical barcode"
                                       widget="barcode"
                                       help="Scan barcode from pre-printed sheet"/>
                            </group>
                            <group string="Options">
                                <field name="auto_generate_temp_barcodes"/>
                            </group>
                        </group>
                        
                        <notebook>
                            <page string="Files to Add" name="files">
                                <div class="row">
                                    <div class="col-12">
                                        <p class="text-muted">
                                            <i class="fa fa-clipboard-list"/> Create a complete manifest of ALL files in this container. 
                                            Enter every file with names, descriptions, and metadata for complete tracking and retrieval.
                                        </p>
                                    </div>
                                </div>
                                
                                <field name="file_ids" nolabel="1" 
                                       widget="one2many_list" 
                                       context="{'default_wizard_id': id, 'default_partner_id': customer_id}">
                                    <list string="Files" editable="bottom" create="1" delete="1">
                                        <field name="sequence" widget="handle"/>
                                        <field name="name" 
                                               placeholder="e.g., HR-Personnel-2024, Finance-Invoices-Q1"
                                               required="1"/>
                                        <field name="description" 
                                               placeholder="Brief description of file contents"/>
                                        <field name="file_category"/>
                                        <field name="received_date"/>
                                        <field name="barcode" 
                                               placeholder="Physical barcode (optional)"
                                               widget="barcode"/>
                                        <field name="temp_barcode_preview" 
                                               string="ðŸ·ï¸ Temp Barcode (Auto)"
                                               readonly="1"
                                               attrs="{'invisible': [('name', '=', False)]}"/>
                                        <field name="partner_id" column_invisible="1"/>
                                    </list>
                                </field>

                            </page>
                            
                            <page string="Instructions" name="instructions">
                                <div class="container-fluid">
                                    <div class="row">
                                        <div class="col-12">
                                            <h4><i class="fa fa-clipboard-list"/> Container Indexing Service</h4>
                                            <p><strong>This service creates a complete manifest of ALL files in the container for premium tracking.</strong></p>
                                            
                                            <ol class="mt-3">
                                                <li><strong>Scan Container Barcode:</strong> Assign the pre-printed barcode to this container.</li>
                                                <li><strong>Create File Records:</strong> Each row = one separate file folder. Use all available rows.</li>
                                                <li><strong>Complete Metadata:</strong> Enter names, descriptions, categories, and dates for comprehensive tracking.</li>
                                                <li><strong>File Barcodes:</strong> Each file gets its own temp barcode (separate from container barcode).</li>
                                                <li><strong>Generate &amp; Index:</strong> Click "Generate Temp Barcodes &amp; Index Container" to complete.</li>
                                            </ol>
                                            
                                            <div class="alert alert-info mt-3" role="alert">
                                                <h6><i class="fa fa-barcode"/> Barcode Hierarchy</h6>
                                                <ul class="mb-0">
                                                    <li><strong>Container Barcode:</strong> Links to container metadata + all files within it</li>
                                                    <li><strong>File Barcode/Temp Barcode:</strong> Links to specific file metadata + parent container</li>
                                                    <li><strong>Many2One Relationship:</strong> All files point to one container (like products on a shelf)</li>
                                                    <li><strong>Search Either:</strong> Container barcode shows all files; file barcode shows specific file + container</li>
                                                </ul>
                                            </div>
                                            
                                            <div class="alert alert-info mt-4" role="alert">
                                                <h5><i class="fa fa-lightbulb-o"/> Indexing vs. On-the-Fly File Addition</h5>
                                                <ul>
                                                    <li><strong>Container Indexing:</strong> Complete manifest of ALL files for premium customers who want perfect tracking</li>
                                                    <li><strong>On-the-Fly Addition:</strong> Individual file records created during retrieval requests from non-indexed containers</li>
                                                    <li><strong>Use Date/Sequence Ranges:</strong> Non-indexed containers rely on exterior labels to locate files during requests</li>
                                                    <li><strong>Barcode Everything:</strong> Indexed files get individual barcodes for precise location tracking</li>
                                                </ul>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </page>
                        </notebook>
                    </sheet>
                </form>
            </field>
        </record>

        <!-- Wizard Action -->
        <record id="action_container_indexing_wizard" model="ir.actions.act_window">
            <field name="name">Container Indexing Service - Complete Manifest</field>
            <field name="res_model">container.indexing.wizard</field>
            <field name="view_mode">form</field>
            <field name="target">new</field>
            <field name="binding_model_id" ref="model_records_container"/>
            <field name="binding_view_types">form</field>
        </record>
    </data>
</odoo>
