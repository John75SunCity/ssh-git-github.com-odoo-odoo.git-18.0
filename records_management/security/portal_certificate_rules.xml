<?xml version="1.0" encoding="UTF-8"?>
<odoo>
    <data>
        <!-- Portal Record Rules for Destruction Certificates (Optimized + Fixed)
             Only visible certificates, proper group reference
        -->
        <record id="destruction_certificate_rule_portal" model="ir.rule">
            <field name="name">Destruction Certificate - Portal (Paid Only)</field>
            <field name="model_id" ref="model_destruction_certificate"/>
            <field name="groups" eval="[(4, ref('records_management.group_portal_all_tiers'))]"/>
            <field name="domain_force">[
                '&amp;',
                ('portal_visible', '=', True),
                ('partner_id.commercial_partner_id', '=', user.partner_id.commercial_partner_id.id)
            ]</field>
            <field name="perm_read" eval="True"/>
        </record>
    </data>
</odoo>
