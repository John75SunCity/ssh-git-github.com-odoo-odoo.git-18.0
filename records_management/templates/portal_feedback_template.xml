<?xml version="1.0" encoding="UTF-8"?>
<odoo>
    <template id="portal_feedback_template" name="Portal Feedback">
        <t t-call="portal.portal_layout">
            <t t-set="title">Feedback &amp; Suggestions</t>
                <div class="o_portal_feedback">
                    <!-- Header Section -->
                    <div class="feedback-header bg-gradient-info text-white py-4 mb-4 rounded">
                        <div class="container text-center">
                            <h1 class="display-4 font-weight-bold mb-3">
                                <i class="fa fa-comments text-warning"></i>
                                    Your Feedback Matters
                                </h1>
                                <p class="lead mb-0">
                                    Help us improve your Records Management Portal experience
                                </p>
                            </div>
                        </div>

                        <!-- Feedback Options Cards -->
                        <div class="row mb-5">
                            <!-- General Portal Feedback -->
                            <div class="col-lg-6 mb-4">
                                <div class="card border-0 shadow-sm h-100 hover-lift">
                                    <div class="card-header bg-primary text-white text-center">
                                        <i class="fa fa-star fa-2x mb-2"></i>
                                            <h4 class="mb-0">Portal Experience Feedback</h4>
                                            </div>
                                            <div class="card-body text-center">
                                                <p class="card-text mb-4">
                                                    Share your overall experience with the portal, features you use,
                                                    and suggestions for improvements.
                                                </p>
                                                <div class="feedback-highlights mb-4">
                                                    <div class="row">
                                                        <div class="col-6">
                                                            <div class="feedback-stat">
                                                                <i class="fa fa-clock-o text-info"></i>
                                                                    <small class="d-block">~3 minutes</small>
                                                                    </div>
                                                                </div>
                                                                <div class="col-6">
                                                                    <div class="feedback-stat">
                                                                        <i class="fa fa-users text-success"></i>
                                                                            <small class="d-block">Anonymous</small>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                <a href="/survey/start/portal_feedback_survey"
                                                                    class="btn btn-primary btn-lg">
                                                                    <i class="fa fa-comment"></i> Start Feedback Survey
                                                                    </a>
                                                                </div>
                                                            </div>
                                                        </div>

                                                        <!-- Service Request Feedback -->
                                                        <div class="col-lg-6 mb-4">
                                                            <div class="card border-0 shadow-sm h-100 hover-lift">
                                                                <div class="card-header bg-success text-white text-center">
                                                                    <i class="fa fa-cogs fa-2x mb-2"></i>
                                                                        <h4 class="mb-0">Service Request Feedback</h4>
                                                                        </div>
                                                                        <div class="card-body text-center">
                                                                            <p class="card-text mb-4">
                                                                                Rate your recent destruction or service request experience,
                                                                                including timeliness and service quality.
                                                                            </p>
                                                                            <div class="feedback-highlights mb-4">
                                                                                <div class="row">
                                                                                    <div class="col-6">
                                                                                        <div class="feedback-stat">
                                                                                            <i class="fa fa-clock-o text-info"></i>
                                                                                                <small class="d-block">~2 minutes</small>
                                                                                                </div>
                                                                                            </div>
                                                                                            <div class="col-6">
                                                                                                <div class="feedback-stat">
                                                                                                    <i class="fa fa-shield text-warning"></i>
                                                                                                        <small class="d-block">NAID Logged</small>
                                                                                                        </div>
                                                                                                    </div>
                                                                                                </div>
                                                                                            </div>
                                                                                            <a href="/survey/start/service_request_feedback_survey"
                                                                                                class="btn btn-success btn-lg">
                                                                                                <i class="fa fa-star"></i> Rate Service Request
                                                                                                </a>
                                                                                            </div>
                                                                                        </div>
                                                                                    </div>

                                                                                    <!-- Simple Feedback Option -->
                                                                                    <div class="col-lg-4 col-md-6 mb-4">
                                                                                        <div class="card border-0 shadow-sm h-100 hover-lift">
                                                                                            <div class="card-header bg-info text-white text-center">
                                                                                                <i class="fa fa-comment fa-2x mb-2"></i>
                                                                                                    <h4 class="mb-0">Quick Suggestions</h4>
                                                                                                    </div>
                                                                                                    <div class="card-body text-center">
                                                                                                        <p class="card-text mb-4">
                                                                                                            Simple feedback form for quick suggestions, concerns,
                                                                                                            and portal rating - perfect for busy schedules.
                                                                                                        </p>
                                                                                                        <div class="feedback-highlights mb-4">
                                                                                                            <div class="row">
                                                                                                                <div class="col-6">
                                                                                                                    <div class="feedback-stat">
                                                                                                                        <i class="fa fa-clock-o text-info"></i>
                                                                                                                            <small class="d-block">~1 minute</small>
                                                                                                                            </div>
                                                                                                                        </div>
                                                                                                                        <div class="col-6">
                                                                                                                            <div class="feedback-stat">
                                                                                                                                <i class="fa fa-flash text-warning"></i>
                                                                                                                                    <small class="d-block">Quick &amp; Easy</small>
                                                                                                                                    </div>
                                                                                                                                </div>
                                                                                                                            </div>
                                                                                                                        </div>
                                                                                                                        <a href="/survey/start/survey_feedback_portal"
                                                                                                                            class="btn btn-info btn-lg">
                                                                                                                            <i class="fa fa-comment-o"></i> Quick Feedback
                                                                                                                            </a>
                                                                                                                        </div>
                                                                                                                    </div>
                                                                                                                </div>
                                                                                                            </div>

                                                                                                            <!-- Quick Feedback Section -->
                                                                                                            <div class="card mb-5">
                                                                                                                <div class="card-header bg-warning text-dark">
                                                                                                                    <h5 class="mb-0">
                                                                                                                        <i class="fa fa-bolt"></i>
                                                                                                                            Quick Feedback
                                                                                                                        </h5>
                                                                                                                    </div>
                                                                                                                    <div class="card-body">
                                                                                                                        <form id="quick_feedback_form" method="post" action="/my/feedback/quick">
                                                                                                                            <div class="row">
                                                                                                                                <div class="col-md-6">
                                                                                                                                    <div class="form-group">
                                                                                                                                        <label for="feedback_type">Feedback Type</label>
                                                                                                                                            <select name="feedback_type" id="feedback_type" class="form-control" required="required">
                                                                                                                                                <option value="">Select type...</option>
                                                                                                                                                    <option value="suggestion">Suggestion</option>
                                                                                                                                                        <option value="bug_report">Bug Report</option>
                                                                                                                                                            <option value="feature_request">Feature Request</option>
                                                                                                                                                                <option value="compliment">Compliment</option>
                                                                                                                                                                    <option value="complaint">Complaint</option>
                                                                                                                                                                        <option value="security_concern">Security Concern</option>
                                                                                                                                                                        </select>
                                                                                                                                                                    </div>
                                                                                                                                                                </div>
                                                                                                                                                                <div class="col-md-6">
                                                                                                                                                                    <div class="form-group">
                                                                                                                                                                        <label for="priority">Priority Level</label>
                                                                                                                                                                            <select name="priority" id="priority" class="form-control" required="required">
                                                                                                                                                                                <option value="">Select priority...</option>
                                                                                                                                                                                    <option value="low">Low - General feedback</option>
                                                                                                                                                                                        <option value="medium">Medium - Important but not urgent</option>
                                                                                                                                                                                            <option value="high">High - Needs attention soon</option>
                                                                                                                                                                                                <option value="urgent">Urgent - Immediate attention required</option>
                                                                                                                                                                                                </select>
                                                                                                                                                                                            </div>
                                                                                                                                                                                        </div>
                                                                                                                                                                                    </div>
                                                                                                                                                                                    <div class="form-group">
                                                                                                                                                                                        <label for="feedback_content">Your Feedback</label>
                                                                                                                                                                                            <textarea name="feedback_content" id="feedback_content"
                                                                                                                                                                                                class="form-control" rows="4"
                                                                                                                                                                                                placeholder="Please describe your feedback in detail..."
                                                                                                                                                                                                required="required"></textarea>
                                                                                                                                                                                                <small class="form-text text-muted">
                                                                                                                                                                                                    <i class="fa fa-shield text-success"></i>
                                                                                                                                                                                                        All feedback is logged for NAID AAA compliance and quality assurance.
                                                                                                                                                                                                    </small>
                                                                                                                                                                                                </div>
                                                                                                                                                                                                <div class="form-group">
                                                                                                                                                                                                    <div class="form-check">
                                                                                                                                                                                                        <input type="checkbox" class="form-check-input" id="contact_back" name="contact_back"/>
                                                                                                                                                                                                        <label class="form-check-label" for="contact_back">
                                                                                                                                                                                                            I would like to be contacted about this feedback
                                                                                                                                                                                                        </label>
                                                                                                                                                                                                    </div>
                                                                                                                                                                                                </div>
                                                                                                                                                                                                <div class="text-center">
                                                                                                                                                                                                    <button type="submit" class="btn btn-warning btn-lg">
                                                                                                                                                                                                        <i class="fa fa-paper-plane"></i> Submit Feedback
                                                                                                                                                                                                        </button>
                                                                                                                                                                                                    </div>
                                                                                                                                                                                                </form>
                                                                                                                                                                                            </div>
                                                                                                                                                                                        </div>

                                                                                                                                                                                        <!-- Recent Feedback Summary -->
                                                                                                                                                                                        <div class="row" t-if="recent_feedback">
                                                                                                                                                                                            <div class="col-lg-6">
                                                                                                                                                                                                <div class="card">
                                                                                                                                                                                                    <div class="card-header bg-info text-white">
                                                                                                                                                                                                        <h5 class="mb-0">
                                                                                                                                                                                                            <i class="fa fa-history"></i>
                                                                                                                                                                                                                Your Recent Feedback
                                                                                                                                                                                                            </h5>
                                                                                                                                                                                                        </div>
                                                                                                                                                                                                        <div class="card-body">
                                                                                                                                                                                                            <div t-foreach="recent_feedback" t-as="feedback" class="feedback-item mb-3">
                                                                                                                                                                                                                <div class="d-flex justify-content-between">
                                                                                                                                                                                                                    <div>
                                                                                                                                                                                                                        <h6 class="mb-1">
                                                                                                                                                                                                                            <span t-att-class="'badge badge-' + (feedback.priority == 'urgent' ? 'danger' : feedback.priority == 'high' ? 'warning' : 'info')"
                                                                                                                                                                                                                                t-esc="feedback.feedback_type.replace('_', ' ').title()"/>
                                                                                                                                                                                                                            </h6>
                                                                                                                                                                                                                            <p class="mb-1 text-truncate" t-esc="feedback.content[:100] + '...' if len(feedback.content) > 100 else feedback.content"/>
                                                                                                                                                                                                                        </div>
                                                                                                                                                                                                                        <div>
                                                                                                                                                                                                                            <small class="text-muted" t-esc="feedback.create_date.strftime('%m/%d/%Y')"/>
                                                                                                                                                                                                                        </div>
                                                                                                                                                                                                                    </div>
                                                                                                                                                                                                                    <div class="progress" style="height: 3px;">
                                                                                                                                                                                                                        <div t-att-class="'progress-bar bg-' + ('success' if feedback.status == 'resolved' else 'warning' if feedback.status == 'in_progress' else 'info')"
                                                                                                                                                                                                                            t-att-style="'width: ' + ('100%' if feedback.status == 'resolved' else '50%' if feedback.status == 'in_progress' else '25%')">
                                                                                                                                                                                                                        </div>
                                                                                                                                                                                                                    </div>
                                                                                                                                                                                                                    <small t-att-class="'text-' + ('success' if feedback.status == 'resolved' else 'warning' if feedback.status == 'in_progress' else 'muted')"
                                                                                                                                                                                                                        t-esc="feedback.status.replace('_', ' ').title()"/>
                                                                                                                                                                                                                    </div>
                                                                                                                                                                                                                </div>
                                                                                                                                                                                                            </div>
                                                                                                                                                                                                        </div>

                                                                                                                                                                                                        <!-- Feedback Statistics -->
                                                                                                                                                                                                        <div class="col-lg-6">
                                                                                                                                                                                                            <div class="card">
                                                                                                                                                                                                                <div class="card-header bg-secondary text-white">
                                                                                                                                                                                                                    <h5 class="mb-0">
                                                                                                                                                                                                                        <i class="fa fa-chart-pie"></i>
                                                                                                                                                                                                                            Feedback Impact
                                                                                                                                                                                                                        </h5>
                                                                                                                                                                                                                    </div>
                                                                                                                                                                                                                    <div class="card-body">
                                                                                                                                                                                                                        <div class="feedback-stats">
                                                                                                                                                                                                                            <div class="stat-item mb-3">
                                                                                                                                                                                                                                <div class="d-flex justify-content-between">
                                                                                                                                                                                                                                    <span>Total Feedback Submitted:</span>
                                                                                                                                                                                                                                        <strong t-esc="feedback_stats.get('total', 0)"/>
                                                                                                                                                                                                                                    </div>
                                                                                                                                                                                                                                </div>
                                                                                                                                                                                                                                <div class="stat-item mb-3">
                                                                                                                                                                                                                                    <div class="d-flex justify-content-between">
                                                                                                                                                                                                                                        <span>Issues Resolved:</span>
                                                                                                                                                                                                                                            <strong class="text-success" t-esc="feedback_stats.get('resolved', 0)"/>
                                                                                                                                                                                                                                        </div>
                                                                                                                                                                                                                                    </div>
                                                                                                                                                                                                                                    <div class="stat-item mb-3">
                                                                                                                                                                                                                                        <div class="d-flex justify-content-between">
                                                                                                                                                                                                                                            <span>In Progress:</span>
                                                                                                                                                                                                                                                <strong class="text-warning" t-esc="feedback_stats.get('in_progress', 0)"/>
                                                                                                                                                                                                                                            </div>
                                                                                                                                                                                                                                        </div>
                                                                                                                                                                                                                                        <div class="stat-item mb-3">
                                                                                                                                                                                                                                            <div class="d-flex justify-content-between">
                                                                                                                                                                                                                                                <span>Average Response Time:</span>
                                                                                                                                                                                                                                                    <strong class="text-info" t-esc="feedback_stats.get('avg_response_time', 'N/A')"/>
                                                                                                                                                                                                                                                </div>
                                                                                                                                                                                                                                            </div>
                                                                                                                                                                                                                                        </div>

                                                                                                                                                                                                                                        <div class="alert alert-success mt-3">
                                                                                                                                                                                                                                            <i class="fa fa-thumbs-up"></i>
                                                                                                                                                                                                                                                <strong>Thank you!</strong> Your feedback has led to
                                                                                                                                                                                                                                                    <span t-esc="feedback_stats.get('improvements_made', 0)"/>
                                                                                                                                                                                                                                                    portal improvements this quarter.
                                                                                                                                                                                                                                                </div>
                                                                                                                                                                                                                                            </div>
                                                                                                                                                                                                                                        </div>
                                                                                                                                                                                                                                    </div>
                                                                                                                                                                                                                                </div>

                                                                                                                                                                                                                                <!-- Compliance Notice -->
                                                                                                                                                                                                                                <div class="alert alert-info mt-4">
                                                                                                                                                                                                                                    <div class="row align-items-center">
                                                                                                                                                                                                                                        <div class="col-md-8">
                                                                                                                                                                                                                                            <h6 class="alert-heading">
                                                                                                                                                                                                                                                <i class="fa fa-shield"></i>
                                                                                                                                                                                                                                                    NAID AAA Compliance Notice
                                                                                                                                                                                                                                                </h6>
                                                                                                                                                                                                                                                <p class="mb-0">
                                                                                                                                                                                                                                                    All feedback and suggestions are logged as part of our NAID AAA compliance
                                                                                                                                                                                                                                                    program. Your input helps us maintain the highest standards of security
                                                                                                                                                                                                                                                    and service quality.
                                                                                                                                                                                                                                                </p>
                                                                                                                                                                                                                                            </div>
                                                                                                                                                                                                                                            <div class="col-md-4 text-center">
                                                                                                                                                                                                                                                <img src="/records_management/static/img/naid-aaa-logo.png"
                                                                                                                                                                                                                                                    alt="NAID AAA Certified" class="img-fluid" style="max-height: 60px;"/>
                                                                                                                                                                                                                                                </div>
                                                                                                                                                                                                                                            </div>
                                                                                                                                                                                                                                        </div>
                                                                                                                                                                                                                                    </div>

                                                                                                                                                                                                                                    <!-- Custom CSS for Feedback -->
                                                                                                                                                                                                                                    <style>
                                                                                                                                                                                                                                        .feedback-header {
                                                                                                                                                                                                                                        background: linear-gradient(135deg, #17a2b8 0%, #007bff 100%);
                                                                                                                                                                                                                                        }

                                                                                                                                                                                                                                        .hover-lift:hover {
                                                                                                                                                                                                                                        transform: translateY(-5px);
                                                                                                                                                                                                                                        transition: all 0.3s ease;
                                                                                                                                                                                                                                        box-shadow: 0 1rem 3rem rgba(0,0,0,.175)!important;
                                                                                                                                                                                                                                        }

                                                                                                                                                                                                                                        .feedback-stat {
                                                                                                                                                                                                                                        padding: 10px;
                                                                                                                                                                                                                                        background: #f8f9fa;
                                                                                                                                                                                                                                        border-radius: 6px;
                                                                                                                                                                                                                                        text-align: center;
                                                                                                                                                                                                                                        }

                                                                                                                                                                                                                                        .feedback-stat i {
                                                                                                                                                                                                                                        font-size: 1.2em;
                                                                                                                                                                                                                                        display: block;
                                                                                                                                                                                                                                        margin-bottom: 5px;
                                                                                                                                                                                                                                        }

                                                                                                                                                                                                                                        .feedback-item {
                                                                                                                                                                                                                                        padding: 15px;
                                                                                                                                                                                                                                        background: #f8f9fa;
                                                                                                                                                                                                                                        border-radius: 6px;
                                                                                                                                                                                                                                        border-left: 4px solid #007bff;
                                                                                                                                                                                                                                        }

                                                                                                                                                                                                                                        .feedback-item:last-child {
                                                                                                                                                                                                                                        margin-bottom: 0 !important;
                                                                                                                                                                                                                                        }

                                                                                                                                                                                                                                        .stat-item {
                                                                                                                                                                                                                                        padding: 10px 0;
                                                                                                                                                                                                                                        border-bottom: 1px solid #dee2e6;
                                                                                                                                                                                                                                        }

                                                                                                                                                                                                                                        .stat-item:last-child {
                                                                                                                                                                                                                                        border-bottom: none;
                                                                                                                                                                                                                                        }

                                                                                                                                                                                                                                        @media (max-width: 768px) {
                                                                                                                                                                                                                                        .display-4 {
                                                                                                                                                                                                                                        font-size: 2rem;
                                                                                                                                                                                                                                        }

                                                                                                                                                                                                                                        .feedback-header {
                                                                                                                                                                                                                                        padding: 2rem 0 !important;
                                                                                                                                                                                                                                        }
                                                                                                                                                                                                                                        }
                                                                                                                                                                                                                                    </style>
                                                                                                                                                                                                                                </t>
                                                                                                                                                                                                                            </template>
                                                                                                                                                                                                                        </odoo>
